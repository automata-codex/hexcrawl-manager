---
/**
 * Table of Contents component for section overview pages.
 * Renders a list of links from sidebar configuration.
 */
import ArticleLayout from '../layouts/ArticleLayout.astro';

interface ToCItem {
  label: string;
  href: string;
}

interface Props {
  title: string;
  items: ToCItem[];
}

const { title, items } = Astro.props;
---

<ArticleLayout title={title}>
  <nav class="toc-nav" aria-label="Table of contents">
    <ul class="toc-list">
      {items.map((item) => (
        <li class="toc-item">
          <a href={item.href} class="toc-link">
            {item.label}
          </a>
        </li>
      ))}
    </ul>
  </nav>
</ArticleLayout>

<style>
  .toc-nav {
    margin-top: 1rem;
  }

  .toc-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .toc-item {
    margin: 0;
    padding: 0;
    border-bottom: 1px solid var(--border-color, #e0e0e0);
  }

  .toc-item:last-child {
    border-bottom: none;
  }

  .toc-link {
    display: block;
    padding: 0.75rem 0.5rem;
    color: var(--link-color, #3273dc);
    text-decoration: none;
    font-size: 1.1rem;
    transition: background-color 0.15s ease;
  }

  .toc-link:hover {
    background-color: var(--hover-bg, #f5f5f5);
    color: var(--link-hover-color, #363636);
  }

  /* Dark mode support */
  :global(html[data-theme='dark']) .toc-item {
    border-color: #444;
  }

  :global(html[data-theme='dark']) .toc-link:hover {
    background-color: #333;
  }

  @media (prefers-color-scheme: dark) {
    :global(html:not([data-theme])) .toc-item {
      border-color: #444;
    }

    :global(html:not([data-theme])) .toc-link:hover {
      background-color: #333;
    }
  }

  /* Print styles */
  @media print {
    .toc-link {
      color: black;
    }

    .toc-link::after {
      content: ' (' attr(href) ')';
      font-size: 0.9em;
      color: #666;
    }
  }
</style>
