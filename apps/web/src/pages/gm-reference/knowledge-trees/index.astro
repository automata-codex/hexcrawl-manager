---
import SecretLayout from '../../../layouts/SecretLayout.astro';
import { knowledgeTrees } from '../../../utils/knowledge-trees';

// Convert the knowledge trees object to an array and sort by name
const trees = Object.entries(knowledgeTrees)
  .map(([id, tree]) => ({
    id,
    name: tree.name,
    description: tree.description,
  }))
  .sort((a, b) => a.name.localeCompare(b.name));
---

<style>
  .tree-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .tree-item {
    padding: 1rem;
    border-left: 3px solid var(--color-primary);
    background: var(--color-background-secondary, #f5f5f5);
  }

  .tree-item h2 {
    margin: 0 0 0.5rem 0;
    font-size: 1.25rem;
  }

  .tree-item p {
    margin: 0;
    color: var(--color-text-secondary, #666);
  }

  .tree-item a {
    text-decoration: none;
    color: inherit;
  }

  .tree-item a:hover h2 {
    color: var(--color-primary);
  }
</style>

<SecretLayout title="Knowledge Trees">
  <div class="tree-list">
    {
      trees.map((tree) => (
        <div class="tree-item">
          <a href={`/gm-reference/knowledge-trees/${tree.id}`}>
            <h2>{tree.name}</h2>
            <p>{tree.description}</p>
          </a>
        </div>
      ))
    }
  </div>
</SecretLayout>
