# Skyreach API Catalog

_Single-file catalog generated from TypeDoc JSON. Edits will be overwritten._


## cli-kit/src

- `type Constructor = (args: any[]) =&gt; T;`
- `function error(message: string): void`
- `function info(message: string): void`
- `function isInteractive(): boolean`
- `function makeExitMapper(pairs: [Constructor&lt;unknown&gt;, number][], defaultCode: number): (err: unknown) =&gt; number` — Creates a mapping function that returns an exit code for a given error.
- `function maybeOverride(label: string, computed: T, opts?: MaybeOverrideOpts&lt;T&gt;): Promise&lt;T&gt;` — Show a computed value and let the user optionally override it. Enter = accept computed. Ctrl+C = cancel (throws).
- `function selectFromFiles(files: { label: string; value: string }[], opts?: { autoSelectSingle?: boolean; rl?: Interface; title?: string }): Promise&lt;string&gt;` — Pick a file from a list. If exactly one, auto-select (unless disabled). Uses numbered menu on the existing REPL.
- `function spinner(text: string): { stop: (msg?: string) =&gt; void }` — Minimal spinner for brief work.
- `function usage(message: string): void`
- `class UserCanceledError`
- `function warn(message: string): void`

## core/src

- `function assertSeasonId(value: string): string` — Validates and returns a normalized SeasonId (lowercase season).
- `function assertSessionId(value: string): string`
- `function buildSessionId(sessionNumber: number, suffix?: string): string`
- `const CALENDAR_CONFIG: CalendarConfig;`
- `type CalendarConfig = any;`
- `function compareSeasonIds(a: string, b: string): number` — Compare two season IDs (e.g., '1511-autumn') for chronological order. Returns -1 if a < b, 1 if a > b, 0 if equal. Sorts by year, then by season order (winter < spring < summer < autumn).
- `function datesEqual(a: null | { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, b: null | { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }): boolean`
- `class DayStartMissingError`
- `function deriveSeasonId(date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }): string` — Derive a season ID (e.g., '1511-autumn') from a CampaignDate. Always returns lower-case.
- `type DescriptorLibrary = Record&lt;Season, Record&lt;WeatherCategory, string[]&gt;&gt;;`
- `type DetailTable = any;`
- `type DetailTables = Record&lt;Season, DetailTable&gt;;`
- `type EffectsTable = Record&lt;WeatherCategory, WeatherEffects&gt;;`
- `type ForecastModifierTable = Record&lt;WeatherCategory, number&gt;;`
- `function formatDate(d: null | { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }): string`
- `function getDaylightCapForSeason(season: Season): number`
- `function getHexNeighbors(hex: string): string[]` — Get neighboring hexes for a given hex in an odd-q flat-topped hex grid.
- `function getRolloverSeasonId(ev: { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string } | { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string } | { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string } | { kind: "day_end"; payload: { summary: { active: number; daylight: number; night: number } }; seq: number; ts: string } | { kind: "day_start"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }; seq: number; ts: string } | { kind: "dead_reckoning"; payload: { outcome: "success" | "failure" }; seq: number; ts: string } | { kind: "lost"; payload: { reason?: string; state: "on" | "off" }; seq: number; ts: string } | { kind: "move"; payload: { from: null | string; pace: "slow" | "normal" | "fast"; to: string }; seq: number; ts: string } | { kind: "note"; payload: { scope?: "day" | "session"; text: string }; seq: number; ts: string } | { kind: "party_set"; payload: { ids: string[] }; seq: number; ts: string } | { kind: "scout"; payload: { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }; seq: number; ts: string } | { kind: "season_rollover"; payload: { seasonId: string }; seq: number; ts: string } | { kind: "session_continue"; payload: { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }; seq: number; ts: string } | { kind: "session_end"; payload: { id: string; status: "final" }; seq: number; ts: string } | { kind: "session_pause"; payload: { id: string; status: "paused" }; seq: number; ts: string } | { kind: "session_start"; payload: { id: string; sessionDate: string; startHex: string; status: "in-progress" }; seq: number; ts: string } | { kind: "time_log"; payload: { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }; seq: number; ts: string } | { kind: "trail"; payload: { from: string; marked: boolean; to: string }; seq: number; ts: string } | { kind: "weather_committed"; payload: { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }; seq: number; ts: string }): undefined | string`
- `function getSeasonForDate(date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }): Season`
- `function hexSort(hexIdA: string, hexIdB: string): number` — Sorts two hex IDs first by column (alphabetically) and then by row (numerically).
- `function hoursToSegmentsCeil(hours: number): number`
- `function isSeasonId(value: string): boolean` — Runtime type guard for SeasonId (case-insensitive, allows normalization).
- `function isSessionId(value: string): boolean`
- `function isValidHexId(hexId: string): boolean` — Checks if a given string is a valid hex ID.
- `type LeapRule = any;`
- `type MonthDef = any;`
- `function normalizeHexId(h: string): string` — Normalizes a hex ID by trimming whitespace and converting to uppercase.
- `function normalizeSeasonId(id: string): string` — Normalize a season ID to lower-case, trimmed.
- `function padSessionNum(n: string | number): string`
- `function parseSeasonId(seasonId: string): { season: Season; year: number }`
- `function parseTrailId(trailId: string): null | { from: string; to: string }` — Parses a trail ID into its constituent hex IDs.
- `function prevSeasonId(seasonId: string): string`
- `type Season = "winter" | "spring" | "summer" | "autumn";`
- `const SEASON_ID_RE: RegExp;`
- `type SeasonalBand = any;`
- `type SeasonalBandsTable = Record&lt;Season, SeasonalBand[]&gt;;`
- `class SeasonIdError` — Domain error for invalid season identifiers.
- `function seasonIdFromEvents(events: { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string } | { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string } | { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string } | { kind: "day_end"; payload: { summary: { active: number; daylight: number; night: number } }; seq: number; ts: string } | { kind: "day_start"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }; seq: number; ts: string } | { kind: "dead_reckoning"; payload: { outcome: "success" | "failure" }; seq: number; ts: string } | { kind: "lost"; payload: { reason?: string; state: "on" | "off" }; seq: number; ts: string } | { kind: "move"; payload: { from: null | string; pace: "slow" | "normal" | "fast"; to: string }; seq: number; ts: string } | { kind: "note"; payload: { scope?: "day" | "session"; text: string }; seq: number; ts: string } | { kind: "party_set"; payload: { ids: string[] }; seq: number; ts: string } | { kind: "scout"; payload: { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }; seq: number; ts: string } | { kind: "season_rollover"; payload: { seasonId: string }; seq: number; ts: string } | { kind: "session_continue"; payload: { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }; seq: number; ts: string } | { kind: "session_end"; payload: { id: string; status: "final" }; seq: number; ts: string } | { kind: "session_pause"; payload: { id: string; status: "paused" }; seq: number; ts: string } | { kind: "session_start"; payload: { id: string; sessionDate: string; startHex: string; status: "in-progress" }; seq: number; ts: string } | { kind: "time_log"; payload: { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }; seq: number; ts: string } | { kind: "trail"; payload: { from: string; marked: boolean; to: string }; seq: number; ts: string } | { kind: "weather_committed"; payload: { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }; seq: number; ts: string }[], fileHint?: string): string`
- `function segmentsToHours(segments: number): number`
- `class SessionAlreadyAppliedError`
- `class SessionFingerprintMismatchError`
- `class SessionIdError`
- `class SessionLogsNotFoundError`
- `class SessionReportValidationError`
- `function tierFromLevel(level?: number): 1 | 2 | 3 | 4` — Derive character tier from character level
- `type WeatherCategory = WEATHER_CATEGORIES[number];`
- `type WeatherCommitted = any;`
- `type WeatherDraft = any;`
- `type WeatherEffects = any;`

## data/src

- `function appendJsonl(p: string, record: T, opts: WriteOpts): void`
- `function atomicWrite(filePath: string, content: string, opts: AtomicWriteOpts): void` — Write a file atomically: write to a temp file, then rename. Ensures that the file is either fully written or not present.
- `function buildRolloverDevFilename(season: string): string`
- `function buildRolloverFilename(season: string): string`
- `function buildSessionFilename(sessionId: string & BRAND&lt;"SessionId"&gt;, sessionDate: string, suffix?: string): string`
- `function canonicalTrailId(a: string, b: string): string` — Build a stable edge id by ordering the two hex ids with hexSort.
- `function checkFileExists(file: string, msg?: string): string`
- `class DataFileNotFoundError`
- `class DataParseError`
- `class DataValidationError`
- `class DirtyGitError`
- `function discoverCompletedReports(): number[]`
- `function discoverFinalizedLogs(): FinalizedLogInfo[]` — List all finalized scribe logs in the sessions directory.
- `function discoverFinalizedLogsFor(sessionNumber: string | number): FinalizedLogInfo[]` — Convenience filter for a specific session number (accepts number or "0001").
- `function discoverFinalizedLogsForOrThrow(sessionNumber: string | number): FinalizedLogInfo[]` — Convenience guard that throws if nothing matches.
- `function discoverRolloverFiles(): RolloverInfo[]` — Discover all rollover files on disk (both hyphen/underscore tolerated via regex).
- `function enrichLogsWithSeason(logs: FinalizedLogInfo[]): FinalizedLogWithSeason[]` — Add `seasonId` to each log by reading its first day_start event.
- `function ensureDir(filename: string): void`
- `function ensureRepoDirs(): void`
- `interface FinalizedLogInfo`
- `class FinalizedLogJsonParseError`
- `class FinalizedLogsNotFoundError`
- `interface FinalizedLogWithSeason`
- `function getGitHeadCommit(): null | string` — Returns the current git HEAD commit SHA, or null if not in a git repo.
- `function getLatestSessionNumber(): undefined | number` — Latest (max) session number, if any.
- `function getRepoPath(...segments: string[]): string` — Get an absolute path within the repository.
- `function getRepoRoot(): string` — Returns the repository root directory, respecting the REPO_ROOT env override. Falls back to config if not set.
- `function isDevRolloverPath(filePath: string): boolean` — True if the path is a dev rollover file per storage grammar.
- `function isGitDirty(): boolean` — Returns true if the git working directory is dirty (has uncommitted changes).
- `function isProdRolloverPath(filePath: string): boolean` — True if the path is a prod rollover file per storage grammar.
- `function isRolloverPath(filePath: string, opts?: { includeDev?: boolean }): boolean` — True if path is either prod or dev rollover file.
- `function loadAllYamlInDir(dir: string, validator?: ZodType&lt;T, ZodTypeDef, T&gt;): T[]` — Loads and parses all YAML files in a directory, returning an array of objects of type T. Files ending with .yml or .yaml are included. If a Zod validator is provided, validates each parsed object and warns on failure (with absolute file path).
- `function loadConfig(opts?: { cwd?: string; throwIfMissing?: boolean }): null | { repoRoot: string }`
- `function loadHavens(): string[]`
- `function loadMeta(): { nextSessionSeq: number; state: Record&lt;string, { applied?: Record&lt;string, string[]&gt;; backend: "meta" | "ledger" | "external"; checkpoints?: Record&lt;string, string | number | boolean&gt;; fingerprints?: Record&lt;string, string&gt;; mirror?: { info?: Record&lt;string, any&gt;; lastMirrorAt?: string } }&gt;; version: 2 }` — Loads `data/meta.yaml` as MetaV2Data. - Accepts v2 (validates) or v1 (migrates → validates). - If migrated, writes back v2 immediately (write-through upgrade).
- `function loadTrails(): Record&lt;string, TrailData&gt;` — Load trails with normalized and sorted IDs.
- `function normalizeTrailKeys(trails: Record&lt;string, TrailData&gt;): Record&lt;string, TrailData&gt;` — Normalize all keys to canonical form (e.g., "p12-p13" and "p13-p12" collapse). If duplicates normalize to the same key, the FIRST occurrence wins.
- `function parseRolloverDevFilename(base: string): null | { seasonId: string }`
- `function parseRolloverFilename(base: string): null | { seasonId: string }`
- `function parseRolloverPath(filePath: string): null | RolloverPathInfo` — Parse a path into rollover info if it matches prod/dev rollover shapes and location.
- `function parseSessionFilename(filename: string): null | FinalizedLogInfo`
- `function readAllFinalizedLogsForSession(sessionNumber: string | number): { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string } | { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string } | { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string } | { kind: "day_end"; payload: { summary: { active: number; daylight: number; night: number } }; seq: number; ts: string } | { kind: "day_start"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }; seq: number; ts: string } | { kind: "dead_reckoning"; payload: { outcome: "success" | "failure" }; seq: number; ts: string } | { kind: "lost"; payload: { reason?: string; state: "on" | "off" }; seq: number; ts: string } | { kind: "move"; payload: { from: null | string; pace: "slow" | "normal" | "fast"; to: string }; seq: number; ts: string } | { kind: "note"; payload: { scope?: "day" | "session"; text: string }; seq: number; ts: string } | { kind: "party_set"; payload: { ids: string[] }; seq: number; ts: string } | { kind: "scout"; payload: { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }; seq: number; ts: string } | { kind: "season_rollover"; payload: { seasonId: string }; seq: number; ts: string } | { kind: "session_continue"; payload: { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }; seq: number; ts: string } | { kind: "session_end"; payload: { id: string; status: "final" }; seq: number; ts: string } | { kind: "session_pause"; payload: { id: string; status: "paused" }; seq: number; ts: string } | { kind: "session_start"; payload: { id: string; sessionDate: string; startHex: string; status: "in-progress" }; seq: number; ts: string } | { kind: "time_log"; payload: { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }; seq: number; ts: string } | { kind: "trail"; payload: { from: string; marked: boolean; to: string }; seq: number; ts: string } | { kind: "weather_committed"; payload: { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }; seq: number; ts: string }[]` — Reads and concatenates all finalized JSONL events for a given session. Throws FinalizedLogsNotFoundError if no files match, and FinalizedLogJsonParseError with file + line info if parsing fails.
- `function readAndValidateYaml(filepath: string, schema: ZodType&lt;T&gt;): T`
- `function readJsonl(filename: string, opts: ReadJsonlOpts&lt;T&gt;): T[]`
- `function readJsonlWithHeader(filename: string, opts: ReadJsonlWithHeaderOpts&lt;H, T&gt;): { events: T[]; header?: H }`
- `function readOneFinalizedLog(filePath: string): { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string } | { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string } | { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string } | { kind: "day_end"; payload: { summary: { active: number; daylight: number; night: number } }; seq: number; ts: string } | { kind: "day_start"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }; seq: number; ts: string } | { kind: "dead_reckoning"; payload: { outcome: "success" | "failure" }; seq: number; ts: string } | { kind: "lost"; payload: { reason?: string; state: "on" | "off" }; seq: number; ts: string } | { kind: "move"; payload: { from: null | string; pace: "slow" | "normal" | "fast"; to: string }; seq: number; ts: string } | { kind: "note"; payload: { scope?: "day" | "session"; text: string }; seq: number; ts: string } | { kind: "party_set"; payload: { ids: string[] }; seq: number; ts: string } | { kind: "scout"; payload: { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }; seq: number; ts: string } | { kind: "season_rollover"; payload: { seasonId: string }; seq: number; ts: string } | { kind: "session_continue"; payload: { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }; seq: number; ts: string } | { kind: "session_end"; payload: { id: string; status: "final" }; seq: number; ts: string } | { kind: "session_pause"; payload: { id: string; status: "paused" }; seq: number; ts: string } | { kind: "session_start"; payload: { id: string; sessionDate: string; startHex: string; status: "in-progress" }; seq: number; ts: string } | { kind: "time_log"; payload: { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }; seq: number; ts: string } | { kind: "trail"; payload: { from: string; marked: boolean; to: string }; seq: number; ts: string } | { kind: "weather_committed"; payload: { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }; seq: number; ts: string }[]`
- `function readYaml(filepath: string): unknown`
- `const REPO_PATHS: { AP_LEDGER: () =&gt; string; CHARACTERS: () =&gt; string; DEV: () =&gt; string; DEV_IN_PROGRESS: () =&gt; string; DEV_ROLLOVERS: () =&gt; string; DEV_SESSIONS: () =&gt; string; FOOTPRINTS: () =&gt; string; HAVENS: () =&gt; string; IN_PROGRESS: () =&gt; string; LOCKS: () =&gt; string; LOGS_ROOT: () =&gt; string; META: () =&gt; string; REPORTS: () =&gt; string; ROLLOVERS: () =&gt; string; SESSIONS: () =&gt; string; TRAILS: () =&gt; string };`
- `const REPORT_FILE_RE: RegExp;`
- `function resolveDataPath(rel: string): string` — Resolve a path relative to the repo's `data/` directory.
- `function rollDice(notation: string): number` — Parses dice notation (e.g., "2d6+1") and rolls the dice. Uses secure RNG for true randomness only (no seed support).
- `const ROLLOVER_DEV_FILE_RE: RegExp;`
- `const ROLLOVER_FILE_RE: RegExp;`
- `type RolloverInfo = any;` — Internal shape for rollover files on disk.
- `type RolloverPathInfo = any;`
- `function saveMeta(patch: DeepPartial&lt;MetaV2Data&gt;): void` — Saves a partial MetaV2Data to `data/meta.yaml`, deep-merging with existing state. - Arrays in `applied` are union-merged and de-duplicated. - Objects are shallow-merged per field; unspecified subsystems/collections are preserved.
- `function saveTrails(trails: Record&lt;string, TrailData&gt;): void` — Writes the canonical, sorted version of the trails file to disk. Always rewrites the entire file so diffs remain stable.
- `function seasonOfSessionFile(filePath: string): string` — Read the first day_start from a session file and derive a normalized seasonId.
- `const SESSION_FILE_RE: RegExp;`
- `function sortTrailKeys(trails: Record&lt;string, TrailData&gt;): Record&lt;string, TrailData&gt;` — Deterministically sort the map by edge id using hex-aware ordering: first by the first hex (hexSort), then by the second hex (hexSort).
- `function writeJsonl(filename: string, records: Iterable&lt;T&gt;, opts: WriteOpts): void`
- `function writeYamlAtomic(filePath: string, data: any): void` — Write a YAML file atomically.

## schemas/src

- `type AdvancementPointEvent = z.infer&lt;AdvancementPointEventSchema&gt;;`
- `type AdvancementPointEventPayload = z.infer&lt;AdvancementPointEventPayloadSchema&gt;;`
- `const AdvancementPointEventPayloadSchema: ZodObject&lt;{ at: ZodObject&lt;{ hex: ZodNullable&lt;ZodString&gt;; party: ZodArray&lt;ZodString, "many"&gt; }, "strip", ZodTypeAny, { hex: null | string; party: string[] }, { hex: null | string; party: string[] }&gt;; note: ZodOptional&lt;ZodString&gt;; pillar: ZodString; tier: ZodNumber }, "strip", ZodTypeAny, { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }, { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }&gt;;`
- `const AdvancementPointEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"advancement_point"&gt;; payload: ZodObject&lt;{ at: ZodObject&lt;{ hex: ZodNullable&lt;ZodString&gt;; party: ZodArray&lt;ZodString, "many"&gt; }, "strip", ZodTypeAny, { hex: null | string; party: string[] }, { hex: null | string; party: string[] }&gt;; note: ZodOptional&lt;ZodString&gt;; pillar: ZodString; tier: ZodNumber }, "strip", ZodTypeAny, { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }, { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }&gt; }, "strip", ZodTypeAny, { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string }, { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string }&gt;;`
- `type ApDelta = z.infer&lt;ApSchema&gt;;`
- `type ApLedgerEntry = z.infer&lt;ApLedgerEntrySchema&gt;;`
- `const ApLedgerEntrySchema: ZodDiscriminatedUnion&lt;"kind", [ZodObject&lt;{ advancementPoints: ZodObject&lt;{ combat: ZodObject&lt;{ delta: ZodNumber; note: ZodOptional&lt;ZodString&gt;; reason: ZodOptional&lt;ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown, unknown]&gt;&gt; }, "strip", ZodTypeAny, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }&gt;; exploration: ZodObject&lt;{ delta: ZodNumber; note: ZodOptional&lt;ZodString&gt;; reason: ZodOptional&lt;ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown, unknown]&gt;&gt; }, "strip", ZodTypeAny, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }&gt;; social: ZodObject&lt;{ delta: ZodNumber; note: ZodOptional&lt;ZodString&gt;; reason: ZodOptional&lt;ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown, unknown]&gt;&gt; }, "strip", ZodTypeAny, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }&gt; }, "strip", ZodTypeAny, { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }, { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }&gt;; appliedAt: ZodString; characterId: ZodString; kind: ZodLiteral&lt;"absence_spend"&gt;; notes: ZodOptional&lt;ZodString&gt;; sessionId: ZodBranded&lt;ZodString, "SessionId"&gt; }, "strip", ZodTypeAny, { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "absence_spend"; notes?: string; sessionId: string & BRAND&lt;"SessionId"&gt; }, { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "absence_spend"; notes?: string; sessionId: string }&gt;, ZodObject&lt;{ advancementPoints: ZodObject&lt;{ combat: ZodObject&lt;{ delta: ZodNumber; note: ZodOptional&lt;ZodString&gt;; reason: ZodOptional&lt;ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown, unknown]&gt;&gt; }, "strip", ZodTypeAny, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }&gt;; exploration: ZodObject&lt;{ delta: ZodNumber; note: ZodOptional&lt;ZodString&gt;; reason: ZodOptional&lt;ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown, unknown]&gt;&gt; }, "strip", ZodTypeAny, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }&gt;; social: ZodObject&lt;{ delta: ZodNumber; note: ZodOptional&lt;ZodString&gt;; reason: ZodOptional&lt;ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown, unknown]&gt;&gt; }, "strip", ZodTypeAny, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }, { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }&gt; }, "strip", ZodTypeAny, { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }, { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }&gt;; appliedAt: ZodString; characterId: ZodString; kind: ZodLiteral&lt;"session_ap"&gt;; sessionId: ZodBranded&lt;ZodString, "SessionId"&gt;; source: ZodOptional&lt;ZodObject&lt;{ fileHash: ZodString }, "strip", ZodTypeAny, { fileHash: string }, { fileHash: string }&gt;&gt; }, "strip", ZodTypeAny, { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "session_ap"; sessionId: string & BRAND&lt;"SessionId"&gt;; source?: { fileHash: string } }, { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "session_ap"; sessionId: string; source?: { fileHash: string } }&gt;]&gt;;`
- `type ApReason = z.infer&lt;ApReasonSchema&gt;;`
- `const ApReasonSchema: ZodEnum&lt;["normal", "cap", "absence_spend", "downtime", "correction", "grandfathered"]&gt;;`
- `function assertSessionId(value: string): string & BRAND&lt;"SessionId"&gt;`
- `type BacktrackEvent = z.infer&lt;BacktrackEventSchema&gt;;`
- `type BacktrackEventPayload = z.infer&lt;BacktrackEventPayloadSchema&gt;;`
- `const BacktrackEventPayloadSchema: ZodObject&lt;{ pace: ZodEnum&lt;["slow", "normal", "fast"]&gt; }, "strip", ZodTypeAny, { pace: "slow" | "normal" | "fast" }, { pace: "slow" | "normal" | "fast" }&gt;;`
- `const BacktrackEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"backtrack"&gt;; payload: ZodObject&lt;{ pace: ZodEnum&lt;["slow", "normal", "fast"]&gt; }, "strip", ZodTypeAny, { pace: "slow" | "normal" | "fast" }, { pace: "slow" | "normal" | "fast" }&gt; }, "strip", ZodTypeAny, { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string }, { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string }&gt;;`
- `const BaseEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString }, "strip", ZodTypeAny, { seq: number; ts: string }, { seq: number; ts: string }&gt;;` — Shared fields for all events
- `type BountyData = z.infer&lt;BountySchema&gt;;`
- `const BountyListSchema: ZodArray&lt;ZodObject&lt;{ id: ZodString; notes: ZodOptional&lt;ZodString&gt;; poster: ZodString; statBlocks: ZodArray&lt;ZodString, "many"&gt;; text: ZodString; title: ZodString }, "strip", ZodTypeAny, { id: string; notes?: string; poster: string; statBlocks: string[]; text: string; title: string }, { id: string; notes?: string; poster: string; statBlocks: string[]; text: string; title: string }&gt;, "many"&gt;;`
- `const BountySchema: ZodObject&lt;{ id: ZodString; notes: ZodOptional&lt;ZodString&gt;; poster: ZodString; statBlocks: ZodArray&lt;ZodString, "many"&gt;; text: ZodString; title: ZodString }, "strip", ZodTypeAny, { id: string; notes?: string; poster: string; statBlocks: string[]; text: string; title: string }, { id: string; notes?: string; poster: string; statBlocks: string[]; text: string; title: string }&gt;;`
- `type CampaignDate = z.infer&lt;CampaignDateSchema&gt;;`
- `const CampaignDateSchema: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;;`
- `const CategoryTable: ZodRecord&lt;ZodString, ZodRecord&lt;ZodString, ZodArray&lt;ZodObject&lt;{ encounterId: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { encounterId: string; weight: number }, { encounterId: string; weight?: number }&gt;, "many"&gt;&gt;&gt;;`
- `type CategoryTableData = z.infer&lt;CategoryTable&gt;;`
- `const CategoryWeight: ZodObject&lt;{ category: ZodString; label: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { category: string; label: string; weight: number }, { category: string; label: string; weight?: number }&gt;;`
- `type CharacterData = z.infer&lt;CharacterSchema&gt;;`
- `const CharacterSchema: ZodObject&lt;{ advancementPoints: ZodObject&lt;{ combat: ZodNumber; exploration: ZodNumber; social: ZodNumber }, "strip", ZodTypeAny, { combat: number; exploration: number; social: number }, { combat: number; exploration: number; social: number }&gt;; backstory: ZodOptional&lt;ZodString&gt;; backstoryTitle: ZodOptional&lt;ZodString&gt;; class: ZodEnum&lt;["Barbarian", "Bard", "Cleric", "Druid", "Fighter", "Monk", "Paladin", "Ranger", "Rogue", "Sorcerer", "Warlock", "Wizard"]&gt;; culture: ZodString; displayName: ZodString; fullName: ZodString; goals: ZodOptional&lt;ZodString&gt;; id: ZodString; image: ZodOptional&lt;ZodString&gt;; level: ZodNumber; lifecycle: ZodOptional&lt;ZodObject&lt;{ retiredAt: ZodString; retiredNote: ZodOptional&lt;ZodString&gt;; retiredReason: ZodEnum&lt;["archived", "converted_to_npc", "inactive_player", "killed_in_action", "retired_by_player"]&gt; }, "strip", ZodTypeAny, { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }, { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }&gt;&gt;; notes: ZodOptional&lt;ZodString&gt;; playerId: ZodString; pronouns: ZodString; species: ZodString; subclass: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { advancementPoints: { combat: number; exploration: number; social: number }; backstory?: string; backstoryTitle?: string; class: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; displayName: string; fullName: string; goals?: string; id: string; image?: string; level: number; lifecycle?: { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }; notes?: string; playerId: string; pronouns: string; species: string; subclass?: string }, { advancementPoints: { combat: number; exploration: number; social: number }; backstory?: string; backstoryTitle?: string; class: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; displayName: string; fullName: string; goals?: string; id: string; image?: string; level: number; lifecycle?: { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }; notes?: string; playerId: string; pronouns: string; species: string; subclass?: string }&gt;;`
- `type ClassData = z.infer&lt;ClassSchema&gt;;`
- `const ClassEnum: ZodEnum&lt;["Barbarian", "Bard", "Cleric", "Druid", "Fighter", "Monk", "Paladin", "Ranger", "Rogue", "Sorcerer", "Warlock", "Wizard"]&gt;;`
- `const ClassSchema: ZodObject&lt;{ id: ZodString; name: ZodString; subclasses: ZodArray&lt;ZodObject&lt;{ name: ZodString; page: ZodOptional&lt;ZodNumber&gt;; source: ZodEnum&lt;["phb", "tcoe", "toh", "xgte"]&gt; }, "strip", ZodTypeAny, { name: string; page?: number; source: "phb" | "tcoe" | "toh" | "xgte" }, { name: string; page?: number; source: "phb" | "tcoe" | "toh" | "xgte" }&gt;, "many"&gt; }, "strip", ZodTypeAny, { id: string; name: string; subclasses: { name: string; page?: number; source: "phb" | "tcoe" | "toh" | "xgte" }[] }, { id: string; name: string; subclasses: { name: string; page?: number; source: "phb" | "tcoe" | "toh" | "xgte" }[] }&gt;;`
- `type DateSetEvent = z.infer&lt;DateSetEventSchema&gt;;`
- `type DateSetEventPayload = z.infer&lt;DateSetEventPayloadSchema&gt;;`
- `const DateSetEventPayloadSchema: ZodObject&lt;{ calendarDate: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt; }, "strip", ZodTypeAny, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }&gt;;`
- `const DateSetEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"date_set"&gt;; payload: ZodObject&lt;{ calendarDate: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt; }, "strip", ZodTypeAny, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }&gt; }, "strip", ZodTypeAny, { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string }, { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string }&gt;;`
- `type DayEndEvent = z.infer&lt;DayEndEventSchema&gt;;`
- `type DayEndEventPayload = z.infer&lt;DayEndEventPayloadSchema&gt;;`
- `const DayEndEventPayloadSchema: ZodObject&lt;{ summary: ZodObject&lt;{ active: ZodNumber; daylight: ZodNumber; night: ZodNumber }, "strip", ZodTypeAny, { active: number; daylight: number; night: number }, { active: number; daylight: number; night: number }&gt; }, "strip", ZodTypeAny, { summary: { active: number; daylight: number; night: number } }, { summary: { active: number; daylight: number; night: number } }&gt;;`
- `const DayEndEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"day_end"&gt;; payload: ZodObject&lt;{ summary: ZodObject&lt;{ active: ZodNumber; daylight: ZodNumber; night: ZodNumber }, "strip", ZodTypeAny, { active: number; daylight: number; night: number }, { active: number; daylight: number; night: number }&gt; }, "strip", ZodTypeAny, { summary: { active: number; daylight: number; night: number } }, { summary: { active: number; daylight: number; night: number } }&gt; }, "strip", ZodTypeAny, { kind: "day_end"; payload: { summary: { active: number; daylight: number; night: number } }; seq: number; ts: string }, { kind: "day_end"; payload: { summary: { active: number; daylight: number; night: number } }; seq: number; ts: string }&gt;;`
- `type DayStartEvent = z.infer&lt;DayStartEventSchema&gt;;`
- `type DayStartEventPayload = z.infer&lt;DayStartEventPayloadSchema&gt;;`
- `const DayStartEventPayloadSchema: ZodObject&lt;{ calendarDate: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;; daylightCap: ZodNumber; season: ZodString }, "strip", ZodTypeAny, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }&gt;;`
- `const DayStartEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"day_start"&gt;; payload: ZodObject&lt;{ calendarDate: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;; daylightCap: ZodNumber; season: ZodString }, "strip", ZodTypeAny, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }&gt; }, "strip", ZodTypeAny, { kind: "day_start"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }; seq: number; ts: string }, { kind: "day_start"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }; seq: number; ts: string }&gt;;`
- `type DeadReckoningEvent = z.infer&lt;DeadReckoningEventSchema&gt;;`
- `type DeadReckoningEventPayload = z.infer&lt;DeadReckoningEventPayloadSchema&gt;;`
- `const DeadReckoningEventPayloadSchema: ZodObject&lt;{ outcome: ZodEnum&lt;["success", "failure"]&gt; }, "strip", ZodTypeAny, { outcome: "success" | "failure" }, { outcome: "success" | "failure" }&gt;;`
- `const DeadReckoningEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"dead_reckoning"&gt;; payload: ZodObject&lt;{ outcome: ZodEnum&lt;["success", "failure"]&gt; }, "strip", ZodTypeAny, { outcome: "success" | "failure" }, { outcome: "success" | "failure" }&gt; }, "strip", ZodTypeAny, { kind: "dead_reckoning"; payload: { outcome: "success" | "failure" }; seq: number; ts: string }, { kind: "dead_reckoning"; payload: { outcome: "success" | "failure" }; seq: number; ts: string }&gt;;`
- `type DescriptiveActionData = z.infer&lt;DescriptiveActionSchema&gt;;`
- `const DescriptiveActionSchema: ZodObject&lt;{ action_type: ZodLiteral&lt;"descriptive"&gt;; desc: ZodString; name: ZodString; recharge: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { action_type: "descriptive"; desc: string; name: string; recharge?: string }, { action_type: "descriptive"; desc: string; name: string; recharge?: string }&gt;;`
- `type DungeonData = z.infer&lt;DungeonDataSchema&gt;;`
- `const DungeonDataSchema: ZodObject&lt;{ builders: ZodArray&lt;ZodEnum&lt;["alseid", "bearfolk", "cultists", "dragons", "dwarves", "first-civilization", "goblins", "natural"]&gt;, "many"&gt;; hexId: ZodString; id: ZodString; images: ZodOptional&lt;ZodArray&lt;ZodObject&lt;{ description: ZodString; display: ZodOptional&lt;ZodBoolean&gt;; filename: ZodString }, "strip", ZodTypeAny, { description: string; display?: boolean; filename: string }, { description: string; display?: boolean; filename: string }&gt;, "many"&gt;&gt;; name: ZodString; slug: ZodString; source: ZodOptional&lt;ZodString&gt;; statBlocks: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; summary: ZodOptional&lt;ZodString&gt;; treasure: ZodOptional&lt;ZodArray&lt;ZodObject&lt;{ name: ZodString; notes: ZodOptional&lt;ZodString&gt;; rarity: ZodOptional&lt;ZodEnum&lt;["common", "uncommon", "rare", "very rare", "legendary", "artifact"]&gt;&gt;; type: ZodEnum&lt;["art", "currency", "magic-item", "relic", "salvage"]&gt;; value: ZodOptional&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }&gt;, "many"&gt;&gt;; unlocks: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { builders: "alseid" | "bearfolk" | "cultists" | "dragons" | "dwarves" | "first-civilization" | "goblins" | "natural"[]; hexId: string; id: string; images?: { description: string; display?: boolean; filename: string }[]; name: string; slug: string; source?: string; statBlocks?: string[]; summary?: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }, { builders: "alseid" | "bearfolk" | "cultists" | "dragons" | "dwarves" | "first-civilization" | "goblins" | "natural"[]; hexId: string; id: string; images?: { description: string; display?: boolean; filename: string }[]; name: string; slug: string; source?: string; statBlocks?: string[]; summary?: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }&gt;;`
- `const EdgeId: ZodString;`
- `type EncounterData = z.infer&lt;EncounterSchema&gt;;`
- `type EncounterEntryData = z.infer&lt;EncounterEntrySchema&gt;;`
- `const EncounterEntrySchema: ZodObject&lt;{ encounterId: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { encounterId: string; weight: number }, { encounterId: string; weight?: number }&gt;;`
- `type EncounterOverrideData = z.infer&lt;EncounterOverrideSchema&gt;;`
- `const EncounterOverrideSchema: ZodObject&lt;{ categoryTables: ZodOptional&lt;ZodRecord&lt;ZodString, ZodOptional&lt;ZodRecord&lt;ZodString, ZodArray&lt;ZodObject&lt;{ encounterId: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { encounterId: string; weight: number }, { encounterId: string; weight?: number }&gt;, "many"&gt;&gt;&gt;&gt;&gt;; mainTable: ZodOptional&lt;ZodArray&lt;ZodObject&lt;{ category: ZodString; label: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { category: string; label: string; weight: number }, { category: string; label: string; weight?: number }&gt;, "many"&gt;&gt; }, "strip", ZodTypeAny, { categoryTables?: Record&lt;string, undefined | Record&lt;string, { encounterId: string; weight: number }[]&gt;&gt;; mainTable?: { category: string; label: string; weight: number }[] }, { categoryTables?: Record&lt;string, undefined | Record&lt;string, { encounterId: string; weight?: number }[]&gt;&gt;; mainTable?: { category: string; label: string; weight?: number }[] }&gt;;`
- `const EncounterSchema: ZodObject&lt;{ description: ZodString; id: ZodString; name: ZodString; statBlocks: ZodArray&lt;ZodString, "many"&gt;; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { description: string; id: string; name: string; statBlocks: string[]; weight: number }, { description: string; id: string; name: string; statBlocks: string[]; weight?: number }&gt;;`
- `type EncounterTableData = z.infer&lt;EncounterTableSchema&gt;;`
- `const EncounterTableSchema: ZodObject&lt;{ categoryTables: ZodRecord&lt;ZodString, ZodRecord&lt;ZodString, ZodArray&lt;ZodObject&lt;{ encounterId: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { encounterId: string; weight: number }, { encounterId: string; weight?: number }&gt;, "many"&gt;&gt;&gt;; mainTable: ZodArray&lt;ZodObject&lt;{ category: ZodString; label: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { category: string; label: string; weight: number }, { category: string; label: string; weight?: number }&gt;, "many"&gt; }, "strip", ZodTypeAny, { categoryTables: Record&lt;string, Record&lt;string, { encounterId: string; weight: number }[]&gt;&gt;; mainTable: { category: string; label: string; weight: number }[] }, { categoryTables: Record&lt;string, Record&lt;string, { encounterId: string; weight?: number }[]&gt;&gt;; mainTable: { category: string; label: string; weight?: number }[] }&gt;;`
- `const EXHAUSTION_HOURS: 12;`
- `type FactionData = z.infer&lt;FactionSchema&gt;;`
- `const FactionListSchema: ZodArray&lt;ZodObject&lt;{ areaOfOperation: ZodArray&lt;ZodString, "many"&gt;; description: ZodString; id: ZodString; ideology: ZodString; name: ZodString; powerLevel: ZodString }, "strip", ZodTypeAny, { areaOfOperation: string[]; description: string; id: string; ideology: string; name: string; powerLevel: string }, { areaOfOperation: string[]; description: string; id: string; ideology: string; name: string; powerLevel: string }&gt;, "many"&gt;;`
- `const FactionSchema: ZodObject&lt;{ areaOfOperation: ZodArray&lt;ZodString, "many"&gt;; description: ZodString; id: ZodString; ideology: ZodString; name: ZodString; powerLevel: ZodString }, "strip", ZodTypeAny, { areaOfOperation: string[]; description: string; id: string; ideology: string; name: string; powerLevel: string }, { areaOfOperation: string[]; description: string; id: string; ideology: string; name: string; powerLevel: string }&gt;;`
- `type FloatingClueData = z.infer&lt;FloatingClueSchema&gt;;`
- `const FloatingClueSchema: ZodObject&lt;{ detailText: ZodOptional&lt;ZodString&gt;; encounters: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; fallback: ZodOptional&lt;ZodObject&lt;{ consequence: ZodString; trigger: ZodString }, "strip", ZodTypeAny, { consequence: string; trigger: string }, { consequence: string; trigger: string }&gt;&gt;; id: ZodString; name: ZodString; reference: ZodOptional&lt;ZodObject&lt;{ text: ZodString; url: ZodString }, "strip", ZodTypeAny, { text: string; url: string }, { text: string; url: string }&gt;&gt;; status: ZodDefault&lt;ZodEnum&lt;["undiscovered", "revealed", "expired"]&gt;&gt;; summary: ZodString; tags: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; unlocks: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { detailText?: string; encounters?: string[]; fallback?: { consequence: string; trigger: string }; id: string; name: string; reference?: { text: string; url: string }; status: "undiscovered" | "revealed" | "expired"; summary: string; tags?: string[]; unlocks?: string[] }, { detailText?: string; encounters?: string[]; fallback?: { consequence: string; trigger: string }; id: string; name: string; reference?: { text: string; url: string }; status?: "undiscovered" | "revealed" | "expired"; summary: string; tags?: string[]; unlocks?: string[] }&gt;;`
- `function formatCallSite(cs?: CallSite): undefined | string`
- `function getCaller(skip: number): undefined | CallSite`
- `type HexData = z.infer&lt;HexSchema&gt;;`
- `const HexId: ZodString;`
- `const HexSchema: ZodObject&lt;{ biome: ZodEnum&lt;["alpine-tundra", "boreal-forest", "coastal-ocean", "coastal-prairie", "coastal-swamp", "freshwater-lake", "glacier", "highland-bog", "marsh", "mixed-woodland", "montane-forest", "montane-grassland", "moors"]&gt;; elevation: ZodNumber; encounterChance: ZodOptional&lt;ZodNumber&gt;; encounterOverrides: ZodOptional&lt;ZodObject&lt;{ categoryTables: ZodOptional&lt;ZodRecord&lt;ZodString, ZodOptional&lt;ZodRecord&lt;ZodString, ZodArray&lt;ZodObject&lt;unknown, unknown, unknown, unknown, unknown&gt;, "many"&gt;&gt;&gt;&gt;&gt;; mainTable: ZodOptional&lt;ZodArray&lt;ZodObject&lt;{ category: ZodString; label: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { category: string; label: string; weight: number }, { category: string; label: string; weight?: number }&gt;, "many"&gt;&gt; }, "strip", ZodTypeAny, { categoryTables?: Record&lt;string, undefined | Record&lt;string, { encounterId: unknown; weight: unknown }[]&gt;&gt;; mainTable?: { category: string; label: string; weight: number }[] }, { categoryTables?: Record&lt;string, undefined | Record&lt;string, { encounterId: unknown; weight?: unknown }[]&gt;&gt;; mainTable?: { category: string; label: string; weight?: number }[] }&gt;&gt;; hiddenSites: ZodOptional&lt;ZodUnion&lt;[ZodArray&lt;ZodString, "many"&gt;, ZodArray&lt;ZodObject&lt;{ description: ZodString; treasure: ZodOptional&lt;ZodArray&lt;ZodObject&lt;unknown, unknown, unknown, unknown, unknown&gt;, "many"&gt;&gt;; unlocks: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { description: string; treasure?: { name: unknown; notes?: unknown; rarity?: unknown; type: unknown; value?: unknown }[]; unlocks?: string[] }, { description: string; treasure?: { name: unknown; notes?: unknown; rarity?: unknown; type: unknown; value?: unknown }[]; unlocks?: string[] }&gt;, "many"&gt;]&gt;&gt;; hideInCatalog: ZodOptional&lt;ZodBoolean&gt;; id: ZodString; isExplored: ZodOptional&lt;ZodBoolean&gt;; isScouted: ZodOptional&lt;ZodBoolean&gt;; isVisited: ZodOptional&lt;ZodBoolean&gt;; landmark: ZodUnion&lt;[ZodString, ZodObject&lt;{ description: ZodString; treasure: ZodOptional&lt;ZodArray&lt;ZodObject&lt;{ name: ZodString; notes: ZodOptional&lt;unknown&gt;; rarity: ZodOptional&lt;unknown&gt;; type: ZodEnum&lt;unknown&gt;; value: ZodOptional&lt;unknown&gt; }, "strip", ZodTypeAny, { name: string; notes?: unknown | unknown; rarity?: unknown | unknown | unknown | unknown | unknown | unknown | unknown; type: unknown | unknown | unknown | unknown | unknown; value?: unknown | unknown }, { name: string; notes?: unknown | unknown; rarity?: unknown | unknown | unknown | unknown | unknown | unknown | unknown; type: unknown | unknown | unknown | unknown | unknown; value?: unknown | unknown }&gt;, "many"&gt;&gt;; unlocks: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }, { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }&gt;]&gt;; name: ZodString; notes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; regionId: ZodString; secretSite: ZodOptional&lt;ZodString&gt;; slug: ZodString; tags: ZodOptional&lt;ZodArray&lt;ZodUnion&lt;[ZodEnum&lt;["crystal-bounty", "dungeon", "settlement", "dragon-ruins", "fc-city", "fc-ruins", "goblin-ruins", "haven", "landmark-known", "scar-site"]&gt;, ZodString]&gt;, "many"&gt;&gt;; terrain: ZodString; updates: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; vegetation: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { biome: "alpine-tundra" | "boreal-forest" | "coastal-ocean" | "coastal-prairie" | "coastal-swamp" | "freshwater-lake" | "glacier" | "highland-bog" | "marsh" | "mixed-woodland" | "montane-forest" | "montane-grassland" | "moors" | "prairie" | "rocky-highland" | "subalpine-woodland" | "swamp" | "temperate-forest" | "temperate-rainforest" | "temperate-woodland" | "Unknown"; elevation: number; encounterChance?: number; encounterOverrides?: { categoryTables?: Record&lt;string, undefined | Record&lt;string, { encounterId: string; weight: number }[]&gt;&gt;; mainTable?: { category: string; label: string; weight: number }[] }; hiddenSites?: string[] | { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }[]; hideInCatalog?: boolean; id: string; isExplored?: boolean; isScouted?: boolean; isVisited?: boolean; landmark: string | { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }; name: string; notes?: string[]; regionId: string; secretSite?: string; slug: string; tags?: string[]; terrain: string; updates?: string[]; vegetation?: string }, { biome: "alpine-tundra" | "boreal-forest" | "coastal-ocean" | "coastal-prairie" | "coastal-swamp" | "freshwater-lake" | "glacier" | "highland-bog" | "marsh" | "mixed-woodland" | "montane-forest" | "montane-grassland" | "moors" | "prairie" | "rocky-highland" | "subalpine-woodland" | "swamp" | "temperate-forest" | "temperate-rainforest" | "temperate-woodland" | "Unknown"; elevation: number; encounterChance?: number; encounterOverrides?: { categoryTables?: Record&lt;string, undefined | Record&lt;string, { encounterId: string; weight?: unknown | unknown }[]&gt;&gt;; mainTable?: { category: string; label: string; weight?: number }[] }; hiddenSites?: string[] | { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }[]; hideInCatalog?: boolean; id: string; isExplored?: boolean; isScouted?: boolean; isVisited?: boolean; landmark: string | { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }; name: string; notes?: string[]; regionId: string; secretSite?: string; slug: string; tags?: string[]; terrain: string; updates?: string[]; vegetation?: string }&gt;;`
- `type HiddenSitesData = z.infer&lt;HiddenSitesSchema&gt;;`
- `const HiddenSitesSchema: ZodObject&lt;{ description: ZodString; treasure: ZodOptional&lt;ZodArray&lt;ZodObject&lt;{ name: ZodString; notes: ZodOptional&lt;ZodString&gt;; rarity: ZodOptional&lt;ZodEnum&lt;["common", "uncommon", "rare", "very rare", "legendary", "artifact"]&gt;&gt;; type: ZodEnum&lt;["art", "currency", "magic-item", "relic", "salvage"]&gt;; value: ZodOptional&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }&gt;, "many"&gt;&gt;; unlocks: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }, { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }&gt;;`
- `function isSessionId(value: string): boolean`
- `type KnowledgeNodeData = any;`
- `const KnowledgeNodeSchema: z.ZodType&lt;KnowledgeNodeData&gt;;`
- `type KnownTag = unknown;`
- `const KnownTagEnum: ZodEnum&lt;["crystal-bounty", "dungeon", "settlement", "dragon-ruins", "fc-city", "fc-ruins", "goblin-ruins", "haven", "landmark-known", "scar-site"]&gt;;`
- `const LandmarkSchema: ZodObject&lt;{ description: ZodString; treasure: ZodOptional&lt;ZodArray&lt;ZodObject&lt;{ name: ZodString; notes: ZodOptional&lt;ZodString&gt;; rarity: ZodOptional&lt;ZodEnum&lt;["common", "uncommon", "rare", "very rare", "legendary", "artifact"]&gt;&gt;; type: ZodEnum&lt;["art", "currency", "magic-item", "relic", "salvage"]&gt;; value: ZodOptional&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }&gt;, "many"&gt;&gt;; unlocks: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }, { description: string; treasure?: { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }[]; unlocks?: string[] }&gt;;`
- `type LootPackData = z.infer&lt;LootPackSchema&gt;;`
- `const LootPackListSchema: ZodArray&lt;ZodObject&lt;{ description: ZodString; id: ZodString; name: ZodString; treasure: ZodString }, "strip", ZodTypeAny, { description: string; id: string; name: string; treasure: string }, { description: string; id: string; name: string; treasure: string }&gt;, "many"&gt;;`
- `const LootPackSchema: ZodObject&lt;{ description: ZodString; id: ZodString; name: ZodString; treasure: ZodString }, "strip", ZodTypeAny, { description: string; id: string; name: string; treasure: string }, { description: string; id: string; name: string; treasure: string }&gt;;`
- `type LostEvent = z.infer&lt;LostEventSchema&gt;;`
- `type LostEventPayload = z.infer&lt;LostEventPayloadSchema&gt;;`
- `const LostEventPayloadSchema: ZodObject&lt;{ reason: ZodOptional&lt;ZodString&gt;; state: ZodEnum&lt;["on", "off"]&gt; }, "strip", ZodTypeAny, { reason?: string; state: "on" | "off" }, { reason?: string; state: "on" | "off" }&gt;;`
- `const LostEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"lost"&gt;; payload: ZodObject&lt;{ reason: ZodOptional&lt;ZodString&gt;; state: ZodEnum&lt;["on", "off"]&gt; }, "strip", ZodTypeAny, { reason?: string; state: "on" | "off" }, { reason?: string; state: "on" | "off" }&gt; }, "strip", ZodTypeAny, { kind: "lost"; payload: { reason?: string; state: "on" | "off" }; seq: number; ts: string }, { kind: "lost"; payload: { reason?: string; state: "on" | "off" }; seq: number; ts: string }&gt;;`
- `function makeEventSchema(kind: K, payload: P): ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;K&gt;; payload: P }, "strip", ZodTypeAny, unknown, unknown&gt;` — Helper to compose a full event schema from a literal kind and a payload schema
- `function makeSessionId(number: string | number): string & BRAND&lt;"SessionId"&gt;`
- `const MapPathSchema: ZodObject&lt;{ id: ZodString; label: ZodOptional&lt;ZodString&gt;; points: ZodArray&lt;ZodString, "many"&gt;; segmentMetadata: ZodOptional&lt;ZodRecord&lt;ZodString, ZodObject&lt;{ impedesTravel: ZodOptional&lt;ZodBoolean&gt; }, "strip", ZodTypeAny, { impedesTravel?: boolean }, { impedesTravel?: boolean }&gt;&gt;&gt;; type: ZodEnum&lt;["river", "unused-river", "conduit", "trail"]&gt; }, "strip", ZodTypeAny, { id: string; label?: string; points: string[]; segmentMetadata?: Record&lt;string, { impedesTravel?: boolean }&gt;; type: "trail" | "river" | "unused-river" | "conduit" }, { id: string; label?: string; points: string[]; segmentMetadata?: Record&lt;string, { impedesTravel?: boolean }&gt;; type: "trail" | "river" | "unused-river" | "conduit" }&gt;;`
- `type MeleeWeaponAttackData = z.infer&lt;MeleeWeaponAttackSchema&gt;;`
- `const MeleeWeaponAttackSchema: ZodObject&lt;{ action_type: ZodLiteral&lt;"melee weapon attack"&gt;; additional_damage_dice: ZodOptional&lt;ZodString&gt;; additional_damage_type: ZodOptional&lt;ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;&gt;; additional_default_damage: ZodOptional&lt;ZodNumber&gt;; additional_text: ZodOptional&lt;ZodString&gt;; attack_bonus: ZodNumber; damage_bonus: ZodNullable&lt;ZodNumber&gt;; damage_dice: ZodString; damage_type: ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;; default_damage: ZodNumber; desc: ZodOptional&lt;ZodString&gt;; name: ZodString; reach: ZodString; recharge: ZodOptional&lt;ZodString&gt;; use_desc: ZodOptional&lt;ZodBoolean&gt; }, "strip", ZodTypeAny, { action_type: "melee weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: null | number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; reach: string; recharge?: string; use_desc?: boolean }, { action_type: "melee weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: null | number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; reach: string; recharge?: string; use_desc?: boolean }&gt;;`
- `type MetaData = z.infer&lt;MetaSchema&gt;;`
- `const MetaSchema: ZodObject&lt;{ appliedSessions: ZodArray&lt;ZodString, "many"&gt;; nextSessionSeq: ZodNumber; rolledSeasons: ZodArray&lt;ZodString, "many"&gt; }, "strip", ZodTypeAny, { appliedSessions: string[]; nextSessionSeq: number; rolledSeasons: string[] }, { appliedSessions: string[]; nextSessionSeq: number; rolledSeasons: string[] }&gt;;`
- `type MetaV2Data = z.infer&lt;MetaV2Schema&gt;;`
- `const MetaV2Schema: ZodObject&lt;{ nextSessionSeq: ZodNumber; state: ZodRecord&lt;ZodString, ZodObject&lt;{ applied: ZodOptional&lt;ZodRecord&lt;ZodString, ZodArray&lt;ZodString, "many"&gt;&gt;&gt;; backend: ZodEnum&lt;["meta", "ledger", "external"]&gt;; checkpoints: ZodOptional&lt;ZodRecord&lt;ZodString, ZodUnion&lt;[ZodString, ZodNumber, ZodBoolean]&gt;&gt;&gt;; fingerprints: ZodOptional&lt;ZodRecord&lt;ZodString, ZodString&gt;&gt;; mirror: ZodOptional&lt;ZodEffects&lt;ZodObject&lt;{ info: ZodOptional&lt;ZodOptional&lt;unknown&gt;&gt;; lastMirrorAt: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { info?: Record&lt;unknown, unknown&gt;; lastMirrorAt?: string }, { info?: Record&lt;unknown, unknown&gt;; lastMirrorAt?: string }&gt;, { info?: Record&lt;string, any&gt;; lastMirrorAt?: string }, { info?: Record&lt;string, any&gt;; lastMirrorAt?: string }&gt;&gt; }, "strict", ZodTypeAny, { applied?: Record&lt;string, string[]&gt;; backend: "meta" | "ledger" | "external"; checkpoints?: Record&lt;string, string | number | boolean&gt;; fingerprints?: Record&lt;string, string&gt;; mirror?: { info?: Record&lt;string, any&gt;; lastMirrorAt?: string } }, { applied?: Record&lt;string, string[]&gt;; backend: "meta" | "ledger" | "external"; checkpoints?: Record&lt;string, string | number | boolean&gt;; fingerprints?: Record&lt;string, string&gt;; mirror?: { info?: Record&lt;string, any&gt;; lastMirrorAt?: string } }&gt;&gt;; version: ZodLiteral&lt;2&gt; }, "strict", ZodTypeAny, { nextSessionSeq: number; state: Record&lt;string, { applied?: Record&lt;string, string[]&gt;; backend: "meta" | "ledger" | "external"; checkpoints?: Record&lt;string, string | number | boolean&gt;; fingerprints?: Record&lt;string, string&gt;; mirror?: { info?: Record&lt;string, any&gt;; lastMirrorAt?: string } }&gt;; version: 2 }, { nextSessionSeq: number; state: Record&lt;string, { applied?: Record&lt;string, string[]&gt;; backend: "meta" | "ledger" | "external"; checkpoints?: Record&lt;string, string | number | boolean&gt;; fingerprints?: Record&lt;string, string&gt;; mirror?: { info?: Record&lt;string, any&gt;; lastMirrorAt?: string } }&gt;; version: 2 }&gt;;`
- `type Month = MONTH_NAMES[number];`
- `const MONTH_NAMES: unknown;`
- `type MoveEvent = z.infer&lt;MoveEventSchema&gt;;`
- `type MoveEventPayload = z.infer&lt;MoveEventPayloadSchema&gt;;`
- `const MoveEventPayloadSchema: ZodObject&lt;{ from: ZodNullable&lt;ZodString&gt;; pace: ZodEnum&lt;["slow", "normal", "fast"]&gt;; to: ZodString }, "strip", ZodTypeAny, { from: null | string; pace: "slow" | "normal" | "fast"; to: string }, { from: null | string; pace: "slow" | "normal" | "fast"; to: string }&gt;;`
- `const MoveEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"move"&gt;; payload: ZodObject&lt;{ from: ZodNullable&lt;ZodString&gt;; pace: ZodEnum&lt;["slow", "normal", "fast"]&gt;; to: ZodString }, "strip", ZodTypeAny, { from: null | string; pace: "slow" | "normal" | "fast"; to: string }, { from: null | string; pace: "slow" | "normal" | "fast"; to: string }&gt; }, "strip", ZodTypeAny, { kind: "move"; payload: { from: null | string; pace: "slow" | "normal" | "fast"; to: string }; seq: number; ts: string }, { kind: "move"; payload: { from: null | string; pace: "slow" | "normal" | "fast"; to: string }; seq: number; ts: string }&gt;;`
- `type NoteEvent = z.infer&lt;NoteEventSchema&gt;;`
- `type NoteEventPayload = z.infer&lt;NoteEventPayloadSchema&gt;;`
- `const NoteEventPayloadSchema: ZodObject&lt;{ scope: ZodOptional&lt;ZodEnum&lt;["session", "day"]&gt;&gt;; text: ZodString }, "strip", ZodTypeAny, { scope?: "day" | "session"; text: string }, { scope?: "day" | "session"; text: string }&gt;;`
- `const NoteEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"note"&gt;; payload: ZodObject&lt;{ scope: ZodOptional&lt;ZodEnum&lt;["session", "day"]&gt;&gt;; text: ZodString }, "strip", ZodTypeAny, { scope?: "day" | "session"; text: string }, { scope?: "day" | "session"; text: string }&gt; }, "strip", ZodTypeAny, { kind: "note"; payload: { scope?: "day" | "session"; text: string }; seq: number; ts: string }, { kind: "note"; payload: { scope?: "day" | "session"; text: string }; seq: number; ts: string }&gt;;`
- `type NpcData = z.infer&lt;NpcSchema&gt;;`
- `const NpcSchema: ZodObject&lt;{ adventuringCompany: ZodOptional&lt;ZodString&gt;; class: ZodOptional&lt;ZodEnum&lt;["Barbarian", "Bard", "Cleric", "Druid", "Fighter", "Monk", "Paladin", "Ranger", "Rogue", "Sorcerer", "Warlock", "Wizard"]&gt;&gt;; culture: ZodString; description: ZodString; id: ZodString; image: ZodOptional&lt;ZodString&gt;; name: ZodString; notes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; occupation: ZodString; pronouns: ZodString; species: ZodString; title: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { adventuringCompany?: string; class?: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; description: string; id: string; image?: string; name: string; notes?: string[]; occupation: string; pronouns: string; species: string; title?: string }, { adventuringCompany?: string; class?: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; description: string; id: string; image?: string; name: string; notes?: string[]; occupation: string; pronouns: string; species: string; title?: string }&gt;;`
- `type Pace = PACES[number];`
- `const PACES: unknown;`
- `function padSessionNum(n: string | number): string`
- `function parseSessionId(id: string & BRAND&lt;"SessionId"&gt;): { number: number }`
- `type PartySetEvent = z.infer&lt;PartySetEventSchema&gt;;`
- `type PartySetEventPayload = z.infer&lt;PartySetEventPayloadSchema&gt;;`
- `const PartySetEventPayloadSchema: ZodObject&lt;{ ids: ZodArray&lt;ZodString, "many"&gt; }, "strip", ZodTypeAny, { ids: string[] }, { ids: string[] }&gt;;`
- `const PartySetEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"party_set"&gt;; payload: ZodObject&lt;{ ids: ZodArray&lt;ZodString, "many"&gt; }, "strip", ZodTypeAny, { ids: string[] }, { ids: string[] }&gt; }, "strip", ZodTypeAny, { kind: "party_set"; payload: { ids: string[] }; seq: number; ts: string }, { kind: "party_set"; payload: { ids: string[] }; seq: number; ts: string }&gt;;`
- `type PayloadOfKind = ScribeEventOfKind&lt;K&gt;["payload"];`
- `type Pillar = PILLARS[number];`
- `const PILLARS: unknown;`
- `type PlayerData = z.infer&lt;PlayerSchema&gt;;`
- `const PlayerListSchema: ZodArray&lt;ZodObject&lt;{ displayName: ZodString; id: ZodString; pronouns: ZodString; slug: ZodString }, "strip", ZodTypeAny, { displayName: string; id: string; pronouns: string; slug: string }, { displayName: string; id: string; pronouns: string; slug: string }&gt;, "many"&gt;;`
- `const PlayerSchema: ZodObject&lt;{ displayName: ZodString; id: ZodString; pronouns: ZodString; slug: ZodString }, "strip", ZodTypeAny, { displayName: string; id: string; pronouns: string; slug: string }, { displayName: string; id: string; pronouns: string; slug: string }&gt;;`
- `type RangedWeaponAttackData = z.infer&lt;RangedWeaponAttackSchema&gt;;`
- `const RangedWeaponAttackSchema: ZodObject&lt;{ action_type: ZodLiteral&lt;"ranged weapon attack"&gt;; additional_damage_dice: ZodOptional&lt;ZodString&gt;; additional_damage_type: ZodOptional&lt;ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;&gt;; additional_default_damage: ZodOptional&lt;ZodNumber&gt;; additional_text: ZodOptional&lt;ZodString&gt;; attack_bonus: ZodNumber; damage_bonus: ZodNumber; damage_dice: ZodString; damage_type: ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;; default_damage: ZodNumber; desc: ZodOptional&lt;ZodString&gt;; name: ZodString; range: ZodString; recharge: ZodOptional&lt;ZodString&gt;; use_desc: ZodOptional&lt;ZodBoolean&gt; }, "strip", ZodTypeAny, { action_type: "ranged weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; range: string; recharge?: string; use_desc?: boolean }, { action_type: "ranged weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; range: string; recharge?: string; use_desc?: boolean }&gt;;`
- `type RegionData = z.infer&lt;RegionSchema&gt;;`
- `const RegionSchema: ZodObject&lt;{ contentDensity: ZodNumber; description: ZodString; encounterChance: ZodNumber; encounters: ZodOptional&lt;ZodObject&lt;{ categoryTables: ZodRecord&lt;ZodString, ZodRecord&lt;ZodString, ZodArray&lt;ZodObject&lt;{ encounterId: ZodString; weight: ZodDefault&lt;unknown&gt; }, "strip", ZodTypeAny, { encounterId: string; weight: number }, { encounterId: string; weight?: unknown | unknown }&gt;, "many"&gt;&gt;&gt;; mainTable: ZodArray&lt;ZodObject&lt;{ category: ZodString; label: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { category: string; label: string; weight: number }, { category: string; label: string; weight?: number }&gt;, "many"&gt; }, "strip", ZodTypeAny, { categoryTables: Record&lt;string, Record&lt;string, { encounterId: string; weight: number }[]&gt;&gt;; mainTable: { category: string; label: string; weight: number }[] }, { categoryTables: Record&lt;string, Record&lt;string, { encounterId: string; weight?: number }[]&gt;&gt;; mainTable: { category: string; label: string; weight?: number }[] }&gt;&gt;; haven: ZodString; id: ZodString; name: ZodString; treasureRating: ZodNumber; type: ZodEnum&lt;["skyreach", "starting", "mid-frontier", "deep-frontier", "mythic-realm"]&gt; }, "strip", ZodTypeAny, { contentDensity: number; description: string; encounterChance: number; encounters?: { categoryTables: Record&lt;string, Record&lt;string, { encounterId: string; weight: number }[]&gt;&gt;; mainTable: { category: string; label: string; weight: number }[] }; haven: string; id: string; name: string; treasureRating: number; type: "skyreach" | "starting" | "mid-frontier" | "deep-frontier" | "mythic-realm" }, { contentDensity: number; description: string; encounterChance: number; encounters?: { categoryTables: Record&lt;string, Record&lt;string, { encounterId: string; weight?: number }[]&gt;&gt;; mainTable: { category: string; label: string; weight?: number }[] }; haven: string; id: string; name: string; treasureRating: number; type: "skyreach" | "starting" | "mid-frontier" | "deep-frontier" | "mythic-realm" }&gt;;`
- `type RumorData = z.infer&lt;RumorSchema&gt;;`
- `const RumorListSchema: ZodArray&lt;ZodObject&lt;{ description: ZodString; id: ZodString; isAvailable: ZodOptional&lt;ZodBoolean&gt;; isKnown: ZodOptional&lt;ZodBoolean&gt;; notes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; status: ZodEnum&lt;["true", "false", "misleading"]&gt;; title: ZodString }, "strip", ZodTypeAny, { description: string; id: string; isAvailable?: boolean; isKnown?: boolean; notes?: string[]; status: "true" | "false" | "misleading"; title: string }, { description: string; id: string; isAvailable?: boolean; isKnown?: boolean; notes?: string[]; status: "true" | "false" | "misleading"; title: string }&gt;, "many"&gt;;`
- `const RumorSchema: ZodObject&lt;{ description: ZodString; id: ZodString; isAvailable: ZodOptional&lt;ZodBoolean&gt;; isKnown: ZodOptional&lt;ZodBoolean&gt;; notes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; status: ZodEnum&lt;["true", "false", "misleading"]&gt;; title: ZodString }, "strip", ZodTypeAny, { description: string; id: string; isAvailable?: boolean; isKnown?: boolean; notes?: string[]; status: "true" | "false" | "misleading"; title: string }, { description: string; id: string; isAvailable?: boolean; isKnown?: boolean; notes?: string[]; status: "true" | "false" | "misleading"; title: string }&gt;;`
- `type Scope = z.infer&lt;ScopeSchema&gt;;`
- `const ScopeListSchema: ZodArray&lt;ZodEnum&lt;["gm:view", "player:view", "public:view"]&gt;, "many"&gt;;`
- `const ScopeSchema: ZodEnum&lt;["gm:view", "player:view", "public:view"]&gt;;`
- `type ScoutEvent = z.infer&lt;ScoutEventSchema&gt;;`
- `type ScoutEventPayload = z.infer&lt;ScoutEventPayloadSchema&gt;;`
- `const ScoutEventPayloadSchema: ZodObject&lt;{ from: ZodString; reveal: ZodObject&lt;{ landmark: ZodBoolean; terrain: ZodBoolean; vegetation: ZodBoolean }, "strip", ZodTypeAny, { landmark: boolean; terrain: boolean; vegetation: boolean }, { landmark: boolean; terrain: boolean; vegetation: boolean }&gt;; target: ZodString }, "strip", ZodTypeAny, { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }, { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }&gt;;`
- `const ScoutEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"scout"&gt;; payload: ZodObject&lt;{ from: ZodString; reveal: ZodObject&lt;{ landmark: ZodBoolean; terrain: ZodBoolean; vegetation: ZodBoolean }, "strip", ZodTypeAny, { landmark: boolean; terrain: boolean; vegetation: boolean }, { landmark: boolean; terrain: boolean; vegetation: boolean }&gt;; target: ZodString }, "strip", ZodTypeAny, { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }, { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }&gt; }, "strip", ZodTypeAny, { kind: "scout"; payload: { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }; seq: number; ts: string }, { kind: "scout"; payload: { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }; seq: number; ts: string }&gt;;`
- `type ScribeEvent = z.infer&lt;ScribeEventSchema&gt;;`
- `type ScribeEventKind = ScribeEvent["kind"];`
- `type ScribeEventOfKind = Extract&lt;ScribeEvent, { kind: K }&gt;;`
- `type ScribeEventPayload = ScribeEvent["payload"];`
- `const ScribeEventSchema: ZodDiscriminatedUnion&lt;"kind", [ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"advancement_point"&gt;; payload: ZodObject&lt;{ at: ZodObject&lt;{ hex: ZodNullable&lt;ZodString&gt;; party: ZodArray&lt;ZodString, "many"&gt; }, "strip", ZodTypeAny, { hex: null | string; party: string[] }, { hex: null | string; party: string[] }&gt;; note: ZodOptional&lt;ZodString&gt;; pillar: ZodString; tier: ZodNumber }, "strip", ZodTypeAny, { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }, { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }&gt; }, "strip", ZodTypeAny, { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string }, { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string }&gt;, ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"backtrack"&gt;; payload: ZodObject&lt;{ pace: ZodEnum&lt;["slow", "normal", "fast"]&gt; }, "strip", ZodTypeAny, { pace: "slow" | "normal" | "fast" }, { pace: "slow" | "normal" | "fast" }&gt; }, "strip", ZodTypeAny, { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string }, { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string }&gt;, ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"date_set"&gt;; payload: ZodObject&lt;{ calendarDate: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt; }, "strip", ZodTypeAny, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }, { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }&gt; }, "strip", ZodTypeAny, { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string }, { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string }&gt;]&gt;;`
- `type ScribeHeader = z.infer&lt;ScribeHeaderSchema&gt;;`
- `const ScribeHeaderSchema: ZodObject&lt;{ kind: ZodLiteral&lt;"header"&gt;; payload: ZodObject&lt;{ id: ZodString; inWorldEnd: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;; inWorldStart: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;; seasonId: ZodString }, "strip", ZodTypeAny, { id: string; inWorldEnd: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; inWorldStart: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; seasonId: string }, { id: string; inWorldEnd: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; inWorldStart: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; seasonId: string }&gt; }, "strip", ZodTypeAny, { kind: "header"; payload: { id: string; inWorldEnd: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; inWorldStart: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; seasonId: string } }, { kind: "header"; payload: { id: string; inWorldEnd: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; inWorldStart: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; seasonId: string } }&gt;;`
- `type Season = "winter" | "spring" | "summer" | "autumn";`
- `const SEASON_ORDER: Season[];`
- `const SeasonId: ZodString;`
- `type SeasonRolloverEvent = z.infer&lt;SeasonRolloverEventSchema&gt;;`
- `type SeasonRolloverEventPayload = z.infer&lt;SeasonRolloverEventPayloadSchema&gt;;`
- `const SeasonRolloverEventPayloadSchema: ZodObject&lt;{ seasonId: ZodString }, "strip", ZodTypeAny, { seasonId: string }, { seasonId: string }&gt;;`
- `const SeasonRolloverEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"season_rollover"&gt;; payload: ZodObject&lt;{ seasonId: ZodString }, "strip", ZodTypeAny, { seasonId: string }, { seasonId: string }&gt; }, "strip", ZodTypeAny, { kind: "season_rollover"; payload: { seasonId: string }; seq: number; ts: string }, { kind: "season_rollover"; payload: { seasonId: string }; seq: number; ts: string }&gt;;`
- `type SegmentMetadataData = z.infer&lt;SegmentMetadataSchema&gt;;`
- `const SegmentMetadataSchema: ZodObject&lt;{ impedesTravel: ZodOptional&lt;ZodBoolean&gt; }, "strip", ZodTypeAny, { impedesTravel?: boolean }, { impedesTravel?: boolean }&gt;;`
- `const SESSION_ID_RE: RegExp;`
- `type SessionContinueEvent = z.infer&lt;SessionContinueEventSchema&gt;;`
- `type SessionContinueEventPayload = z.infer&lt;SessionContinueEventPayloadSchema&gt;;`
- `const SessionContinueEventPayloadSchema: ZodObject&lt;{ currentDate: ZodOptional&lt;ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;&gt;; currentHex: ZodString; currentParty: ZodArray&lt;ZodString, "many"&gt;; id: ZodString; sessionDate: ZodString; status: ZodLiteral&lt;"in-progress"&gt; }, "strip", ZodTypeAny, { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }, { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }&gt;;`
- `const SessionContinueEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"session_continue"&gt;; payload: ZodObject&lt;{ currentDate: ZodOptional&lt;ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;&gt;; currentHex: ZodString; currentParty: ZodArray&lt;ZodString, "many"&gt;; id: ZodString; sessionDate: ZodString; status: ZodLiteral&lt;"in-progress"&gt; }, "strip", ZodTypeAny, { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }, { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }&gt; }, "strip", ZodTypeAny, { kind: "session_continue"; payload: { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }; seq: number; ts: string }, { kind: "session_continue"; payload: { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }; seq: number; ts: string }&gt;;`
- `type SessionData = z.infer&lt;SessionSchema&gt;;`
- `const SessionDateSchema: ZodString;` — Real-world date in YYYY-MM-DD format
- `type SessionEndEvent = z.infer&lt;SessionEndEventSchema&gt;;`
- `type SessionEndEventPayload = z.infer&lt;SessionEndEventPayloadSchema&gt;;`
- `const SessionEndEventPayloadSchema: ZodObject&lt;{ id: ZodString; status: ZodLiteral&lt;"final"&gt; }, "strip", ZodTypeAny, { id: string; status: "final" }, { id: string; status: "final" }&gt;;`
- `const SessionEndEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"session_end"&gt;; payload: ZodObject&lt;{ id: ZodString; status: ZodLiteral&lt;"final"&gt; }, "strip", ZodTypeAny, { id: string; status: "final" }, { id: string; status: "final" }&gt; }, "strip", ZodTypeAny, { kind: "session_end"; payload: { id: string; status: "final" }; seq: number; ts: string }, { kind: "session_end"; payload: { id: string; status: "final" }; seq: number; ts: string }&gt;;`
- `type SessionId = z.infer&lt;SessionIdSchema&gt;;`
- `class SessionIdError`
- `const SessionIdSchema: ZodBranded&lt;ZodString, "SessionId"&gt;;`
- `type SessionPauseEvent = z.infer&lt;SessionPauseEventSchema&gt;;`
- `type SessionPauseEventPayload = z.infer&lt;SessionPauseEventPayloadSchema&gt;;`
- `const SessionPauseEventPayloadSchema: ZodObject&lt;{ id: ZodString; status: ZodLiteral&lt;"paused"&gt; }, "strip", ZodTypeAny, { id: string; status: "paused" }, { id: string; status: "paused" }&gt;;`
- `const SessionPauseEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"session_pause"&gt;; payload: ZodObject&lt;{ id: ZodString; status: ZodLiteral&lt;"paused"&gt; }, "strip", ZodTypeAny, { id: string; status: "paused" }, { id: string; status: "paused" }&gt; }, "strip", ZodTypeAny, { kind: "session_pause"; payload: { id: string; status: "paused" }; seq: number; ts: string }, { kind: "session_pause"; payload: { id: string; status: "paused" }; seq: number; ts: string }&gt;;`
- `type SessionReport = z.infer&lt;SessionReportSchema&gt;;`
- `const SessionReportSchema: ZodDiscriminatedUnion&lt;"status", [ZodObject&lt;{ absenceAllocations: ZodDefault&lt;ZodArray&lt;ZodObject&lt;{ allocations: ZodObject&lt;{ combat: unknown; exploration: unknown; social: unknown }, "strip", ZodTypeAny, { combat: unknown; exploration: unknown; social: unknown }, { combat?: unknown; exploration?: unknown; social?: unknown }&gt;; characterId: ZodString; notes: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { allocations: { combat: number; exploration: number; social: number }; characterId: string; notes?: string }, { allocations: { combat?: unknown | unknown; exploration?: unknown | unknown; social?: unknown | unknown }; characterId: string; notes?: string }&gt;, "many"&gt;&gt;; createdAt: ZodOptional&lt;ZodString&gt;; downtime: ZodDefault&lt;ZodArray&lt;ZodObject&lt;{ characterId: ZodString; kind: ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown]&gt;; notes: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }, { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }&gt;, "many"&gt;&gt;; gameStartDate: ZodDefault&lt;ZodString&gt;; id: ZodBranded&lt;ZodString, "SessionId"&gt;; schemaVersion: ZodDefault&lt;ZodNumber&gt;; scribeIds: ZodDefault&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; sessionDate: ZodDefault&lt;ZodString&gt;; source: ZodDefault&lt;ZodEnum&lt;["scribe", "import"]&gt;&gt; } & { agenda: ZodOptional&lt;ZodDefault&lt;ZodArray&lt;ZodString, "many"&gt;&gt;&gt;; gmNotes: ZodOptional&lt;ZodString&gt;; status: ZodLiteral&lt;"planned"&gt; }, "strip", ZodTypeAny, { absenceAllocations: { allocations: { combat: number; exploration: number; social: number }; characterId: string; notes?: string }[]; agenda?: string[]; createdAt?: string; downtime: { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }[]; gameStartDate: string; gmNotes?: string; id: string & BRAND&lt;"SessionId"&gt;; schemaVersion: number; scribeIds: string[]; sessionDate: string; source: "scribe" | "import"; status: "planned" }, { absenceAllocations?: { allocations: { combat?: number; exploration?: number; social?: number }; characterId: string; notes?: string }[]; agenda?: string[]; createdAt?: string; downtime?: { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }[]; gameStartDate?: string; gmNotes?: string; id: string; schemaVersion?: number; scribeIds?: string[]; sessionDate?: string; source?: "scribe" | "import"; status: "planned" }&gt;, ZodObject&lt;{ absenceAllocations: ZodDefault&lt;ZodArray&lt;ZodObject&lt;{ allocations: ZodObject&lt;{ combat: unknown; exploration: unknown; social: unknown }, "strip", ZodTypeAny, { combat: unknown; exploration: unknown; social: unknown }, { combat?: unknown; exploration?: unknown; social?: unknown }&gt;; characterId: ZodString; notes: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { allocations: { combat: number; exploration: number; social: number }; characterId: string; notes?: string }, { allocations: { combat?: unknown | unknown; exploration?: unknown | unknown; social?: unknown | unknown }; characterId: string; notes?: string }&gt;, "many"&gt;&gt;; createdAt: ZodOptional&lt;ZodString&gt;; downtime: ZodDefault&lt;ZodArray&lt;ZodObject&lt;{ characterId: ZodString; kind: ZodEnum&lt;[unknown, unknown, unknown, unknown, unknown]&gt;; notes: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }, { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }&gt;, "many"&gt;&gt;; gameStartDate: ZodDefault&lt;ZodString&gt;; id: ZodBranded&lt;ZodString, "SessionId"&gt;; schemaVersion: ZodDefault&lt;ZodNumber&gt;; scribeIds: ZodDefault&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; sessionDate: ZodDefault&lt;ZodString&gt;; source: ZodDefault&lt;ZodEnum&lt;["scribe", "import"]&gt;&gt; } & { advancementPoints: ZodObject&lt;{ combat: ZodObject&lt;{ maxTier: ZodNumber; number: ZodNumber }, "strip", ZodTypeAny, { maxTier: number; number: number }, { maxTier: number; number: number }&gt;; exploration: ZodObject&lt;{ maxTier: ZodNumber; number: ZodNumber }, "strip", ZodTypeAny, { maxTier: number; number: number }, { maxTier: number; number: number }&gt;; social: ZodObject&lt;{ maxTier: ZodNumber; number: ZodNumber }, "strip", ZodTypeAny, { maxTier: number; number: number }, { maxTier: number; number: number }&gt; }, "strip", ZodTypeAny, { combat: { maxTier: number; number: number }; exploration: { maxTier: number; number: number }; social: { maxTier: number; number: number } }, { combat: { maxTier: number; number: number }; exploration: { maxTier: number; number: number }; social: { maxTier: number; number: number } }&gt;; characterIds: ZodArray&lt;ZodUnion&lt;[ZodString, ZodObject&lt;{ characterName: ZodString; playerName: ZodString }, "strip", ZodTypeAny, { characterName: string; playerName: string }, { characterName: string; playerName: string }&gt;]&gt;, "many"&gt;; fingerprint: ZodString; gameEndDate: ZodDefault&lt;ZodString&gt;; notes: ZodDefault&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; status: ZodLiteral&lt;"completed"&gt;; todo: ZodDefault&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; weave: ZodObject&lt;{ appliedAt: ZodString; notes: ZodOptional&lt;ZodString&gt;; version: ZodString }, "strip", ZodTypeAny, { appliedAt: string; notes?: string; version: string }, { appliedAt: string; notes?: string; version: string }&gt; }, "strip", ZodTypeAny, { absenceAllocations: { allocations: { combat: number; exploration: number; social: number }; characterId: string; notes?: string }[]; advancementPoints: { combat: { maxTier: number; number: number }; exploration: { maxTier: number; number: number }; social: { maxTier: number; number: number } }; characterIds: string | { characterName: string; playerName: string }[]; createdAt?: string; downtime: { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }[]; fingerprint: string; gameEndDate: string; gameStartDate: string; id: string & BRAND&lt;"SessionId"&gt;; notes: string[]; schemaVersion: number; scribeIds: string[]; sessionDate: string; source: "scribe" | "import"; status: "completed"; todo: string[]; weave: { appliedAt: string; notes?: string; version: string } }, { absenceAllocations?: { allocations: { combat?: number; exploration?: number; social?: number }; characterId: string; notes?: string }[]; advancementPoints: { combat: { maxTier: number; number: number }; exploration: { maxTier: number; number: number }; social: { maxTier: number; number: number } }; characterIds: string | { characterName: string; playerName: string }[]; createdAt?: string; downtime?: { characterId: string; kind: "crafting" | "training" | "research" | "travel" | "other"; notes?: string }[]; fingerprint: string; gameEndDate?: string; gameStartDate?: string; id: string; notes?: string[]; schemaVersion?: number; scribeIds?: string[]; sessionDate?: string; source?: "scribe" | "import"; status: "completed"; todo?: string[]; weave: { appliedAt: string; notes?: string; version: string } }&gt;]&gt;;`
- `const SessionSchema: ZodObject&lt;{ advancementPoints: ZodObject&lt;{ combat: ZodObject&lt;{ maxTier: ZodNumber; number: ZodUnion&lt;[ZodNumber, ZodLiteral&lt;"-"&gt;]&gt; }, "strip", ZodTypeAny, { maxTier: number; number: number | "-" }, { maxTier: number; number: number | "-" }&gt;; exploration: ZodObject&lt;{ maxTier: ZodNumber; number: ZodUnion&lt;[ZodNumber, ZodLiteral&lt;"-"&gt;]&gt; }, "strip", ZodTypeAny, { maxTier: number; number: number | "-" }, { maxTier: number; number: number | "-" }&gt;; social: ZodObject&lt;{ maxTier: ZodNumber; number: ZodUnion&lt;[ZodNumber, ZodLiteral&lt;"-"&gt;]&gt; }, "strip", ZodTypeAny, { maxTier: number; number: number | "-" }, { maxTier: number; number: number | "-" }&gt; }, "strip", ZodTypeAny, { combat: { maxTier: number; number: number | "-" }; exploration: { maxTier: number; number: number | "-" }; social: { maxTier: number; number: number | "-" } }, { combat: { maxTier: number; number: number | "-" }; exploration: { maxTier: number; number: number | "-" }; social: { maxTier: number; number: number | "-" } }&gt;; agenda: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; characterIds: ZodArray&lt;ZodUnion&lt;[ZodString, ZodObject&lt;{ characterName: ZodString; playerName: ZodString }, "strip", ZodTypeAny, { characterName: string; playerName: string }, { characterName: string; playerName: string }&gt;]&gt;, "many"&gt;; events: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; gameDates: ZodString; id: ZodString; sessionDate: ZodString }, "strip", ZodTypeAny, { advancementPoints: { combat: { maxTier: number; number: number | "-" }; exploration: { maxTier: number; number: number | "-" }; social: { maxTier: number; number: number | "-" } }; agenda?: string[]; characterIds: string | { characterName: string; playerName: string }[]; events?: string[]; gameDates: string; id: string; sessionDate: string }, { advancementPoints: { combat: { maxTier: number; number: number | "-" }; exploration: { maxTier: number; number: number | "-" }; social: { maxTier: number; number: number | "-" } }; agenda?: string[]; characterIds: string | { characterName: string; playerName: string }[]; events?: string[]; gameDates: string; id: string; sessionDate: string }&gt;;`
- `type SessionStartEvent = z.infer&lt;SessionStartEventSchema&gt;;`
- `type SessionStartEventPayload = z.infer&lt;SessionStartEventPayloadSchema&gt;;`
- `const SessionStartEventPayloadSchema: ZodObject&lt;{ id: ZodString; sessionDate: ZodString; startHex: ZodString; status: ZodLiteral&lt;"in-progress"&gt; }, "strip", ZodTypeAny, { id: string; sessionDate: string; startHex: string; status: "in-progress" }, { id: string; sessionDate: string; startHex: string; status: "in-progress" }&gt;;`
- `const SessionStartEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"session_start"&gt;; payload: ZodObject&lt;{ id: ZodString; sessionDate: ZodString; startHex: ZodString; status: ZodLiteral&lt;"in-progress"&gt; }, "strip", ZodTypeAny, { id: string; sessionDate: string; startHex: string; status: "in-progress" }, { id: string; sessionDate: string; startHex: string; status: "in-progress" }&gt; }, "strip", ZodTypeAny, { kind: "session_start"; payload: { id: string; sessionDate: string; startHex: string; status: "in-progress" }; seq: number; ts: string }, { kind: "session_start"; payload: { id: string; sessionDate: string; startHex: string; status: "in-progress" }; seq: number; ts: string }&gt;;`
- `const SkillsSchema: ZodObject&lt;{ acrobatics: ZodOptional&lt;ZodNumber&gt;; animal_handling: ZodOptional&lt;ZodNumber&gt;; arcana: ZodOptional&lt;ZodNumber&gt;; athletics: ZodOptional&lt;ZodNumber&gt;; deception: ZodOptional&lt;ZodNumber&gt;; history: ZodOptional&lt;ZodNumber&gt;; insight: ZodOptional&lt;ZodNumber&gt;; intimidation: ZodOptional&lt;ZodNumber&gt;; investigation: ZodOptional&lt;ZodNumber&gt;; medicine: ZodOptional&lt;ZodNumber&gt;; nature: ZodOptional&lt;ZodNumber&gt;; perception: ZodOptional&lt;ZodNumber&gt;; performance: ZodOptional&lt;ZodNumber&gt;; persuasion: ZodOptional&lt;ZodNumber&gt;; religion: ZodOptional&lt;ZodNumber&gt;; sleight_of_hand: ZodOptional&lt;ZodNumber&gt;; stealth: ZodOptional&lt;ZodNumber&gt;; survival: ZodOptional&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { acrobatics?: number; animal_handling?: number; arcana?: number; athletics?: number; deception?: number; history?: number; insight?: number; intimidation?: number; investigation?: number; medicine?: number; nature?: number; perception?: number; performance?: number; persuasion?: number; religion?: number; sleight_of_hand?: number; stealth?: number; survival?: number }, { acrobatics?: number; animal_handling?: number; arcana?: number; athletics?: number; deception?: number; history?: number; insight?: number; intimidation?: number; investigation?: number; medicine?: number; nature?: number; perception?: number; performance?: number; persuasion?: number; religion?: number; sleight_of_hand?: number; stealth?: number; survival?: number }&gt;;`
- `type SpecialActionData = z.infer&lt;SpecialActionSchema&gt;;`
- `const SpecialActionSchema: ZodObject&lt;{ action_type: ZodLiteral&lt;"special"&gt;; desc: ZodString; name: ZodString; recharge: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { action_type: "special"; desc: string; name: string; recharge?: string }, { action_type: "special"; desc: string; name: string; recharge?: string }&gt;;`
- `type StatBlockData = z.infer&lt;StatBlockSchema&gt;;`
- `const StatBlockSchema: ZodObject&lt;{ actions: ZodArray&lt;ZodUnion&lt;[ZodObject&lt;{ action_type: ZodLiteral&lt;"descriptive"&gt;; desc: ZodString; name: ZodString; recharge: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { action_type: "descriptive"; desc: string; name: string; recharge?: string }, { action_type: "descriptive"; desc: string; name: string; recharge?: string }&gt;, ZodObject&lt;{ action_type: ZodLiteral&lt;"melee weapon attack"&gt;; additional_damage_dice: ZodOptional&lt;ZodString&gt;; additional_damage_type: ZodOptional&lt;ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;&gt;; additional_default_damage: ZodOptional&lt;ZodNumber&gt;; additional_text: ZodOptional&lt;ZodString&gt;; attack_bonus: ZodNumber; damage_bonus: ZodNullable&lt;ZodNumber&gt;; damage_dice: ZodString; damage_type: ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;; default_damage: ZodNumber; desc: ZodOptional&lt;ZodString&gt;; name: ZodString; reach: ZodString; recharge: ZodOptional&lt;ZodString&gt;; use_desc: ZodOptional&lt;ZodBoolean&gt; }, "strip", ZodTypeAny, { action_type: "melee weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: null | number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; reach: string; recharge?: string; use_desc?: boolean }, { action_type: "melee weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: null | number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; reach: string; recharge?: string; use_desc?: boolean }&gt;, ZodObject&lt;{ action_type: ZodLiteral&lt;"ranged weapon attack"&gt;; additional_damage_dice: ZodOptional&lt;ZodString&gt;; additional_damage_type: ZodOptional&lt;ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;&gt;; additional_default_damage: ZodOptional&lt;ZodNumber&gt;; additional_text: ZodOptional&lt;ZodString&gt;; attack_bonus: ZodNumber; damage_bonus: ZodNumber; damage_dice: ZodString; damage_type: ZodEnum&lt;["acid", "bludgeoning", "cold", "fire", "force", "lightning", "necrotic", "piercing", "poison", "psychic", "radiant", "slashing", "thunder"]&gt;; default_damage: ZodNumber; desc: ZodOptional&lt;ZodString&gt;; name: ZodString; range: ZodString; recharge: ZodOptional&lt;ZodString&gt;; use_desc: ZodOptional&lt;ZodBoolean&gt; }, "strip", ZodTypeAny, { action_type: "ranged weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; range: string; recharge?: string; use_desc?: boolean }, { action_type: "ranged weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; range: string; recharge?: string; use_desc?: boolean }&gt;, ZodObject&lt;{ action_type: ZodLiteral&lt;"special"&gt;; desc: ZodString; name: ZodString; recharge: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { action_type: "special"; desc: string; name: string; recharge?: string }, { action_type: "special"; desc: string; name: string; recharge?: string }&gt;]&gt;, "many"&gt;; alignment: ZodEnum&lt;["any", "unaligned", "any non-lawful alignment", "lawful good", "neutral good", "chaotic good", "lawful neutral", "neutral", "chaotic neutral", "lawful evil", "neutral evil", "chaotic evil"]&gt;; armor_class: ZodNumber; armor_desc: ZodOptional&lt;ZodNullable&lt;ZodString&gt;&gt;; bonus_actions: ZodOptional&lt;ZodNullable&lt;ZodArray&lt;ZodString, "many"&gt;&gt;&gt;; challenge_rating: ZodString; charisma: ZodNumber; charisma_save: ZodOptional&lt;ZodNullable&lt;ZodNumber&gt;&gt;; condition_immunities: ZodOptional&lt;ZodString&gt;; constitution: ZodNumber; constitution_save: ZodOptional&lt;ZodNullable&lt;ZodNumber&gt;&gt;; cr: ZodNumber; damage_immunities: ZodOptional&lt;ZodString&gt;; damage_resistances: ZodOptional&lt;ZodString&gt;; damage_vulnerabilities: ZodOptional&lt;ZodString&gt;; desc: ZodOptional&lt;ZodString&gt;; dexterity: ZodNumber; dexterity_save: ZodOptional&lt;ZodNullable&lt;ZodNumber&gt;&gt;; document__license_url: ZodOptional&lt;ZodString&gt;; document__slug: ZodOptional&lt;ZodString&gt;; document__title: ZodOptional&lt;ZodString&gt;; document__url: ZodOptional&lt;ZodString&gt;; environments: ZodArray&lt;ZodEnum&lt;["arctic", "coastal", "desert", "forest", "grassland", "hill", "mountain", "swamp", "underdark", "underwater", "urban"]&gt;, "many"&gt;; family: ZodOptional&lt;ZodNullable&lt;ZodString&gt;&gt;; family_name: ZodOptional&lt;ZodNullable&lt;ZodString&gt;&gt;; group: ZodOptional&lt;ZodNullable&lt;ZodString&gt;&gt;; hit_dice: ZodString; hit_points: ZodNumber; id: ZodString; img_main: ZodOptional&lt;ZodNullable&lt;ZodString&gt;&gt;; intelligence: ZodNumber; intelligence_save: ZodOptional&lt;ZodNullable&lt;ZodNumber&gt;&gt;; languages: ZodString; legendary_actions: ZodOptional&lt;ZodNullable&lt;ZodArray&lt;ZodString, "many"&gt;&gt;&gt;; legendary_desc: ZodOptional&lt;ZodString&gt;; name: ZodString; page_no: ZodNullable&lt;ZodNumber&gt;; perception: ZodOptional&lt;ZodNullable&lt;ZodNumber&gt;&gt;; proficiency_bonus: ZodNumber; reactions: ZodOptional&lt;ZodNullable&lt;ZodArray&lt;ZodObject&lt;{ desc: ZodString; name: ZodString }, "strip", ZodTypeAny, { desc: string; name: string }, { desc: string; name: string }&gt;, "many"&gt;&gt;&gt;; senses: ZodString; size: ZodEnum&lt;["tiny", "small", "medium", "large", "huge", "gargantuan"]&gt;; skills: ZodOptional&lt;ZodObject&lt;{ acrobatics: ZodOptional&lt;ZodNumber&gt;; animal_handling: ZodOptional&lt;ZodNumber&gt;; arcana: ZodOptional&lt;ZodNumber&gt;; athletics: ZodOptional&lt;ZodNumber&gt;; deception: ZodOptional&lt;ZodNumber&gt;; history: ZodOptional&lt;ZodNumber&gt;; insight: ZodOptional&lt;ZodNumber&gt;; intimidation: ZodOptional&lt;ZodNumber&gt;; investigation: ZodOptional&lt;ZodNumber&gt;; medicine: ZodOptional&lt;ZodNumber&gt;; nature: ZodOptional&lt;ZodNumber&gt;; perception: ZodOptional&lt;ZodNumber&gt;; performance: ZodOptional&lt;ZodNumber&gt;; persuasion: ZodOptional&lt;ZodNumber&gt;; religion: ZodOptional&lt;ZodNumber&gt;; sleight_of_hand: ZodOptional&lt;ZodNumber&gt;; stealth: ZodOptional&lt;ZodNumber&gt;; survival: ZodOptional&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { acrobatics?: number; animal_handling?: number; arcana?: number; athletics?: number; deception?: number; history?: number; insight?: number; intimidation?: number; investigation?: number; medicine?: number; nature?: number; perception?: number; performance?: number; persuasion?: number; religion?: number; sleight_of_hand?: number; stealth?: number; survival?: number }, { acrobatics?: number; animal_handling?: number; arcana?: number; athletics?: number; deception?: number; history?: number; insight?: number; intimidation?: number; investigation?: number; medicine?: number; nature?: number; perception?: number; performance?: number; persuasion?: number; religion?: number; sleight_of_hand?: number; stealth?: number; survival?: number }&gt;&gt;; slug: ZodOptional&lt;ZodString&gt;; special_abilities: ZodNullable&lt;ZodArray&lt;ZodObject&lt;{ desc: ZodString; name: ZodString; recharge: ZodOptional&lt;ZodString&gt; }, "strip", ZodTypeAny, { desc: string; name: string; recharge?: string }, { desc: string; name: string; recharge?: string }&gt;, "many"&gt;&gt;; speed: ZodObject&lt;{ burrow: ZodOptional&lt;ZodNumber&gt;; climb: ZodOptional&lt;ZodNumber&gt;; fly: ZodOptional&lt;ZodNumber&gt;; hover: ZodOptional&lt;ZodBoolean&gt;; swim: ZodOptional&lt;ZodNumber&gt;; walk: ZodOptional&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { burrow?: number; climb?: number; fly?: number; hover?: boolean; swim?: number; walk?: number }, { burrow?: number; climb?: number; fly?: number; hover?: boolean; swim?: number; walk?: number }&gt;; spell_list: ZodArray&lt;ZodString, "many"&gt;; strength: ZodNumber; strength_save: ZodOptional&lt;ZodNullable&lt;ZodNumber&gt;&gt;; subtype: ZodOptional&lt;ZodString&gt;; type: ZodEnum&lt;["aberration", "beast", "celestial", "construct", "dragon", "elemental", "fey", "fiend", "giant", "humanoid", "monstrosity", "ooze", "plant", "undead"]&gt;; v2_converted_path: ZodOptional&lt;ZodString&gt;; wisdom: ZodNumber; wisdom_save: ZodOptional&lt;ZodNullable&lt;ZodNumber&gt;&gt; }, "strip", ZodTypeAny, { actions: { action_type: "descriptive"; desc: string; name: string; recharge?: string } | { action_type: "melee weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: null | number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; reach: string; recharge?: string; use_desc?: boolean } | { action_type: "ranged weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; range: string; recharge?: string; use_desc?: boolean } | { action_type: "special"; desc: string; name: string; recharge?: string }[]; alignment: "any" | "unaligned" | "any non-lawful alignment" | "lawful good" | "neutral good" | "chaotic good" | "lawful neutral" | "neutral" | "chaotic neutral" | "lawful evil" | "neutral evil" | "chaotic evil"; armor_class: number; armor_desc?: null | string; bonus_actions?: null | string[]; challenge_rating: string; charisma: number; charisma_save?: null | number; condition_immunities?: string; constitution: number; constitution_save?: null | number; cr: number; damage_immunities?: string; damage_resistances?: string; damage_vulnerabilities?: string; desc?: string; dexterity: number; dexterity_save?: null | number; document__license_url?: string; document__slug?: string; document__title?: string; document__url?: string; environments: "swamp" | "arctic" | "coastal" | "desert" | "forest" | "grassland" | "hill" | "mountain" | "underdark" | "underwater" | "urban"[]; family?: null | string; family_name?: null | string; group?: null | string; hit_dice: string; hit_points: number; id: string; img_main?: null | string; intelligence: number; intelligence_save?: null | number; languages: string; legendary_actions?: null | string[]; legendary_desc?: string; name: string; page_no: null | number; perception?: null | number; proficiency_bonus: number; reactions?: null | { desc: string; name: string }[]; senses: string; size: "tiny" | "small" | "medium" | "large" | "huge" | "gargantuan"; skills?: { acrobatics?: number; animal_handling?: number; arcana?: number; athletics?: number; deception?: number; history?: number; insight?: number; intimidation?: number; investigation?: number; medicine?: number; nature?: number; perception?: number; performance?: number; persuasion?: number; religion?: number; sleight_of_hand?: number; stealth?: number; survival?: number }; slug?: string; special_abilities: null | { desc: string; name: string; recharge?: string }[]; speed: { burrow?: number; climb?: number; fly?: number; hover?: boolean; swim?: number; walk?: number }; spell_list: string[]; strength: number; strength_save?: null | number; subtype?: string; type: "aberration" | "beast" | "celestial" | "construct" | "dragon" | "elemental" | "fey" | "fiend" | "giant" | "humanoid" | "monstrosity" | "ooze" | "plant" | "undead"; v2_converted_path?: string; wisdom: number; wisdom_save?: null | number }, { actions: { action_type: "descriptive"; desc: string; name: string; recharge?: string } | { action_type: "melee weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: null | number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; reach: string; recharge?: string; use_desc?: boolean } | { action_type: "ranged weapon attack"; additional_damage_dice?: string; additional_damage_type?: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; additional_default_damage?: number; additional_text?: string; attack_bonus: number; damage_bonus: number; damage_dice: string; damage_type: "acid" | "bludgeoning" | "cold" | "fire" | "force" | "lightning" | "necrotic" | "piercing" | "poison" | "psychic" | "radiant" | "slashing" | "thunder"; default_damage: number; desc?: string; name: string; range: string; recharge?: string; use_desc?: boolean } | { action_type: "special"; desc: string; name: string; recharge?: string }[]; alignment: "any" | "unaligned" | "any non-lawful alignment" | "lawful good" | "neutral good" | "chaotic good" | "lawful neutral" | "neutral" | "chaotic neutral" | "lawful evil" | "neutral evil" | "chaotic evil"; armor_class: number; armor_desc?: null | string; bonus_actions?: null | string[]; challenge_rating: string; charisma: number; charisma_save?: null | number; condition_immunities?: string; constitution: number; constitution_save?: null | number; cr: number; damage_immunities?: string; damage_resistances?: string; damage_vulnerabilities?: string; desc?: string; dexterity: number; dexterity_save?: null | number; document__license_url?: string; document__slug?: string; document__title?: string; document__url?: string; environments: "swamp" | "arctic" | "coastal" | "desert" | "forest" | "grassland" | "hill" | "mountain" | "underdark" | "underwater" | "urban"[]; family?: null | string; family_name?: null | string; group?: null | string; hit_dice: string; hit_points: number; id: string; img_main?: null | string; intelligence: number; intelligence_save?: null | number; languages: string; legendary_actions?: null | string[]; legendary_desc?: string; name: string; page_no: null | number; perception?: null | number; proficiency_bonus: number; reactions?: null | { desc: string; name: string }[]; senses: string; size: "tiny" | "small" | "medium" | "large" | "huge" | "gargantuan"; skills?: { acrobatics?: number; animal_handling?: number; arcana?: number; athletics?: number; deception?: number; history?: number; insight?: number; intimidation?: number; investigation?: number; medicine?: number; nature?: number; perception?: number; performance?: number; persuasion?: number; religion?: number; sleight_of_hand?: number; stealth?: number; survival?: number }; slug?: string; special_abilities: null | { desc: string; name: string; recharge?: string }[]; speed: { burrow?: number; climb?: number; fly?: number; hover?: boolean; swim?: number; walk?: number }; spell_list: string[]; strength: number; strength_save?: null | number; subtype?: string; type: "aberration" | "beast" | "celestial" | "construct" | "dragon" | "elemental" | "fey" | "fiend" | "giant" | "humanoid" | "monstrosity" | "ooze" | "plant" | "undead"; v2_converted_path?: string; wisdom: number; wisdom_save?: null | number }&gt;;`
- `type StatBlockSkillsData = z.infer&lt;SkillsSchema&gt;;`
- `const STEP_HOURS: 0.5;`
- `const SubclassSchema: ZodObject&lt;{ name: ZodString; page: ZodOptional&lt;ZodNumber&gt;; source: ZodEnum&lt;["phb", "tcoe", "toh", "xgte"]&gt; }, "strip", ZodTypeAny, { name: string; page?: number; source: "phb" | "tcoe" | "toh" | "xgte" }, { name: string; page?: number; source: "phb" | "tcoe" | "toh" | "xgte" }&gt;;`
- `type SupplementData = z.infer&lt;SupplementSchema&gt;;`
- `const SupplementListSchema: ZodArray&lt;ZodObject&lt;{ id: ZodString; name: ZodString; pdfUrl: ZodString; purchaseUrl: ZodString }, "strip", ZodTypeAny, { id: string; name: string; pdfUrl: string; purchaseUrl: string }, { id: string; name: string; pdfUrl: string; purchaseUrl: string }&gt;, "many"&gt;;`
- `const SupplementSchema: ZodObject&lt;{ id: ZodString; name: ZodString; pdfUrl: ZodString; purchaseUrl: ZodString }, "strip", ZodTypeAny, { id: string; name: string; pdfUrl: string; purchaseUrl: string }, { id: string; name: string; pdfUrl: string; purchaseUrl: string }&gt;;`
- `const TagSchema: ZodUnion&lt;[ZodEnum&lt;["crystal-bounty", "dungeon", "settlement", "dragon-ruins", "fc-city", "fc-ruins", "goblin-ruins", "haven", "landmark-known", "scar-site"]&gt;, ZodString]&gt;;`
- `type Tier = TIERS[number];`
- `type TieredSubtableData = z.infer&lt;TieredSubtableSchema&gt;;`
- `const TieredSubtableSchema: ZodRecord&lt;ZodString, ZodArray&lt;ZodObject&lt;{ encounterId: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { encounterId: string; weight: number }, { encounterId: string; weight?: number }&gt;, "many"&gt;&gt;;`
- `const TIERS: unknown;`
- `type TimeLogEvent = z.infer&lt;TimeLogEventSchema&gt;;`
- `type TimeLogEventPayload = z.infer&lt;TimeLogEventPayloadSchema&gt;;`
- `const TimeLogEventPayloadSchema: ZodObject&lt;{ daylightSegments: ZodNumber; nightSegments: ZodNumber; note: ZodOptional&lt;ZodString&gt;; phase: ZodEnum&lt;["daylight", "night"]&gt;; segments: ZodNumber }, "strip", ZodTypeAny, { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }, { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }&gt;;`
- `const TimeLogEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"time_log"&gt;; payload: ZodObject&lt;{ daylightSegments: ZodNumber; nightSegments: ZodNumber; note: ZodOptional&lt;ZodString&gt;; phase: ZodEnum&lt;["daylight", "night"]&gt;; segments: ZodNumber }, "strip", ZodTypeAny, { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }, { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }&gt; }, "strip", ZodTypeAny, { kind: "time_log"; payload: { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }; seq: number; ts: string }, { kind: "time_log"; payload: { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }; seq: number; ts: string }&gt;;`
- `type TrailData = z.infer&lt;TrailSchema&gt;;`
- `type TrailEntry = z.infer&lt;TrailEntrySchema&gt;;`
- `const TrailEntrySchema: ZodObject&lt;{ lastSeasonTouched: ZodString; permanent: ZodBoolean; streak: ZodNumber; usedThisSeason: ZodBoolean } & { id: ZodString }, "strip", ZodTypeAny, { id: string; lastSeasonTouched: string; permanent: boolean; streak: number; usedThisSeason: boolean }, { id: string; lastSeasonTouched: string; permanent: boolean; streak: number; usedThisSeason: boolean }&gt;;`
- `type TrailEvent = z.infer&lt;TrailEventSchema&gt;;`
- `type TrailEventPayload = z.infer&lt;TrailEventPayloadSchema&gt;;`
- `const TrailEventPayloadSchema: ZodObject&lt;{ from: ZodString; marked: ZodBoolean; to: ZodString }, "strip", ZodTypeAny, { from: string; marked: boolean; to: string }, { from: string; marked: boolean; to: string }&gt;;`
- `const TrailEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"trail"&gt;; payload: ZodObject&lt;{ from: ZodString; marked: ZodBoolean; to: ZodString }, "strip", ZodTypeAny, { from: string; marked: boolean; to: string }, { from: string; marked: boolean; to: string }&gt; }, "strip", ZodTypeAny, { kind: "trail"; payload: { from: string; marked: boolean; to: string }; seq: number; ts: string }, { kind: "trail"; payload: { from: string; marked: boolean; to: string }; seq: number; ts: string }&gt;;`
- `const TrailSchema: ZodObject&lt;{ lastSeasonTouched: ZodString; permanent: ZodBoolean; streak: ZodNumber; usedThisSeason: ZodBoolean }, "strip", ZodTypeAny, { lastSeasonTouched: string; permanent: boolean; streak: number; usedThisSeason: boolean }, { lastSeasonTouched: string; permanent: boolean; streak: number; usedThisSeason: boolean }&gt;;`
- `const TrailsFile: ZodRecord&lt;ZodString, ZodObject&lt;{ lastSeasonTouched: ZodString; permanent: ZodBoolean; streak: ZodNumber; usedThisSeason: ZodBoolean }, "strip", ZodTypeAny, { lastSeasonTouched: string; permanent: boolean; streak: number; usedThisSeason: boolean }, { lastSeasonTouched: string; permanent: boolean; streak: number; usedThisSeason: boolean }&gt;&gt;;`
- `type TreasureData = z.infer&lt;TreasureSchema&gt;;`
- `const TreasureSchema: ZodObject&lt;{ name: ZodString; notes: ZodOptional&lt;ZodString&gt;; rarity: ZodOptional&lt;ZodEnum&lt;["common", "uncommon", "rare", "very rare", "legendary", "artifact"]&gt;&gt;; type: ZodEnum&lt;["art", "currency", "magic-item", "relic", "salvage"]&gt;; value: ZodOptional&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }, { name: string; notes?: string; rarity?: "common" | "uncommon" | "rare" | "very rare" | "legendary" | "artifact"; type: "art" | "currency" | "magic-item" | "relic" | "salvage"; value?: number }&gt;;`
- `const UnusedHiddenSiteListSchema: ZodArray&lt;ZodObject&lt;{ description: ZodString; gmNotes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { description: string; gmNotes?: string[] }, { description: string; gmNotes?: string[] }&gt;, "many"&gt;;`
- `const UnusedHiddenSiteSchema: ZodObject&lt;{ description: ZodString; gmNotes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt; }, "strip", ZodTypeAny, { description: string; gmNotes?: string[] }, { description: string; gmNotes?: string[] }&gt;;`
- `const WEATHER_CATEGORIES: unknown;`
- `type WeatherCategory = WEATHER_CATEGORIES[number];`
- `type WeatherCommittedEvent = z.infer&lt;WeatherCommittedEventSchema&gt;;`
- `type WeatherCommittedEventPayload = z.infer&lt;WeatherCommittedEventPayloadSchema&gt;;`
- `const WeatherCommittedEventPayloadSchema: ZodObject&lt;{ category: ZodString; date: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;; descriptors: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; detail: ZodOptional&lt;ZodNullable&lt;ZodString&gt;&gt;; forecastAfter: ZodNumber; forecastBefore: ZodNumber; roll2d6: ZodNumber; season: ZodString; total: ZodNumber }, "strip", ZodTypeAny, { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }, { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }&gt;;`
- `const WeatherCommittedEventSchema: ZodObject&lt;{ seq: ZodNumber; ts: ZodString } & { kind: ZodLiteral&lt;"weather_committed"&gt;; payload: ZodObject&lt;{ category: ZodString; date: ZodObject&lt;{ day: ZodNumber; month: ZodEnum&lt;["Primaris", "Gelidus", "Hibernis", "Vernalis", "Pluvoris", "Florara", "Solinus", "Aestara", "Lucidus", "Fructara", "Umbraeus", "Aridus"]&gt;; year: ZodNumber }, "strip", ZodTypeAny, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }&gt;; descriptors: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; detail: ZodOptional&lt;ZodNullable&lt;ZodString&gt;&gt;; forecastAfter: ZodNumber; forecastBefore: ZodNumber; roll2d6: ZodNumber; season: ZodString; total: ZodNumber }, "strip", ZodTypeAny, { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }, { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }&gt; }, "strip", ZodTypeAny, { kind: "weather_committed"; payload: { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }; seq: number; ts: string }, { kind: "weather_committed"; payload: { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }; seq: number; ts: string }&gt;;`
- `const WeightedCategoryTable: ZodArray&lt;ZodObject&lt;{ category: ZodString; label: ZodString; weight: ZodDefault&lt;ZodNumber&gt; }, "strip", ZodTypeAny, { category: string; label: string; weight: number }, { category: string; label: string; weight?: number }&gt;, "many"&gt;;`
- `class WithCallsiteError`
- `const ZoneCrawlSchema: ZodObject&lt;{ id: ZodString; title: ZodString }, "strip", ZodTypeAny, { id: string; title: string }, { id: string; title: string }&gt;;`
- `const ZoneSchema: ZodObject&lt;{ clues: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; id: ZodString; narrative: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; notes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; primaryType: ZodString; secondaryTypes: ZodOptional&lt;ZodArray&lt;ZodString, "many"&gt;&gt;; squares: ZodArray&lt;ZodString, "many"&gt;; title: ZodString; zoneCrawlId: ZodString }, "strip", ZodTypeAny, { clues?: string[]; id: string; narrative?: string[]; notes?: string[]; primaryType: string; secondaryTypes?: string[]; squares: string[]; title: string; zoneCrawlId: string }, { clues?: string[]; id: string; narrative?: string[]; notes?: string[]; primaryType: string; secondaryTypes?: string[]; squares: string[]; title: string; zoneCrawlId: string }&gt;;`

## test-helpers/src

- `function absenceAp(deltas: Partial&lt;Record&lt;Pillar, number&gt;&gt;): { combat: { delta: number; reason: "absence_spend" }; exploration: { delta: number; reason: "absence_spend" }; social: { delta: number; reason: "absence_spend" } }`
- `type AnyEventPrototype = EventPrototype&lt;ScribeEventKind&gt;;` — Convenience alias for arrays of mixed prototypes.
- `function ap(pillar: "combat" | "exploration" | "social", tier: number, party?: string[], hex?: string, note?: string): EventPrototype&lt;"advancement_point"&gt;`
- `function backtrack(pace: "slow" | "normal" | "fast"): EventPrototype&lt;"backtrack"&gt;`
- `type CharacterKey = "alistar" | "daemaris" | "istavan";`
- `function compileLog(prototypes: AnyEventPrototype[], opts: FinalizeOptions): { kind: "advancement_point"; payload: { at: { hex: null | string; party: string[] }; note?: string; pillar: string; tier: number }; seq: number; ts: string } | { kind: "backtrack"; payload: { pace: "slow" | "normal" | "fast" }; seq: number; ts: string } | { kind: "date_set"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number } }; seq: number; ts: string } | { kind: "day_end"; payload: { summary: { active: number; daylight: number; night: number } }; seq: number; ts: string } | { kind: "day_start"; payload: { calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; daylightCap: number; season: string }; seq: number; ts: string } | { kind: "dead_reckoning"; payload: { outcome: "success" | "failure" }; seq: number; ts: string } | { kind: "lost"; payload: { reason?: string; state: "on" | "off" }; seq: number; ts: string } | { kind: "move"; payload: { from: null | string; pace: "slow" | "normal" | "fast"; to: string }; seq: number; ts: string } | { kind: "note"; payload: { scope?: "day" | "session"; text: string }; seq: number; ts: string } | { kind: "party_set"; payload: { ids: string[] }; seq: number; ts: string } | { kind: "scout"; payload: { from: string; reveal: { landmark: boolean; terrain: boolean; vegetation: boolean }; target: string }; seq: number; ts: string } | { kind: "season_rollover"; payload: { seasonId: string }; seq: number; ts: string } | { kind: "session_continue"; payload: { currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; currentHex: string; currentParty: string[]; id: string; sessionDate: string; status: "in-progress" }; seq: number; ts: string } | { kind: "session_end"; payload: { id: string; status: "final" }; seq: number; ts: string } | { kind: "session_pause"; payload: { id: string; status: "paused" }; seq: number; ts: string } | { kind: "session_start"; payload: { id: string; sessionDate: string; startHex: string; status: "in-progress" }; seq: number; ts: string } | { kind: "time_log"; payload: { daylightSegments: number; nightSegments: number; note?: string; phase: "daylight" | "night"; segments: number }; seq: number; ts: string } | { kind: "trail"; payload: { from: string; marked: boolean; to: string }; seq: number; ts: string } | { kind: "weather_committed"; payload: { category: string; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: string; total: number }; seq: number; ts: string }[]` — Map raw prototypes → finalized ScribeEvent[] with seq/ts
- `function dateSet(calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }): EventPrototype&lt;"date_set"&gt;`
- `function dayEnd(active: number, daylight: number): EventPrototype&lt;"day_end"&gt;`
- `function dayStart(calendarDate: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }): EventPrototype&lt;"day_start"&gt;`
- `function deadReckoning(outcome: "success" | "failure"): EventPrototype&lt;"dead_reckoning"&gt;`
- `type EventPrototype = any;` — Discriminated prototype that a finalizer can stamp with seq/ts.
- `function findSessionFiles(dir: string): string[]`
- `function getTestRepoBase(): string` — Returns the absolute path to the test repo base directory, creating it and the sentinel file if needed. Uses TEST_REPO_BASE env or defaults to ./.test-repos relative to project root.
- `function lost(state: "on" | "off", reason?: string): EventPrototype&lt;"lost"&gt;`
- `function makeAbsenceSpend(entry: { appliedAt: string; characterId: string; deltas: Partial&lt;Record&lt;Pillar, number&gt;&gt;; notes?: string; session: string | number }): { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "absence_spend"; notes?: string; sessionId: string & BRAND&lt;"SessionId"&gt; } | { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "session_ap"; sessionId: string & BRAND&lt;"SessionId"&gt;; source?: { fileHash: string } }`
- `function makeSessionAp(entry: { appliedAt: string; characterId: string; deltas?: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } } | { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; notes?: string; session: string | number }): { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "absence_spend"; notes?: string; sessionId: string & BRAND&lt;"SessionId"&gt; } | { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "session_ap"; sessionId: string & BRAND&lt;"SessionId"&gt;; source?: { fileHash: string } }`
- `function makeSessionApGrid(opts: { appliedAtBySession: (s: string | number) =&gt; string; characters: string[]; deltasBy?: (c: string, s: string | number) =&gt; { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } } | { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; notesBy?: (c: string, s: string | number) =&gt; undefined | string; sessions: string | number[] }): { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "absence_spend"; notes?: string; sessionId: string & BRAND&lt;"SessionId"&gt; } | { advancementPoints: { combat: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; exploration: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" }; social: { delta: number; note?: string; reason?: "normal" | "cap" | "absence_spend" | "downtime" | "correction" | "grandfathered" } }; appliedAt: string; characterId: string; kind: "session_ap"; sessionId: string & BRAND&lt;"SessionId"&gt;; source?: { fileHash: string } }[]`
- `function move(from: string, to: string, pace: "slow" | "normal" | "fast"): EventPrototype&lt;"move"&gt;`
- `function normalAp(deltas: Partial&lt;Record&lt;Pillar, number&gt;&gt;): { combat: { delta: number; reason: "normal" }; exploration: { delta: number; reason: "normal" }; social: { delta: number; reason: "normal" } }`
- `function note(text: string): EventPrototype&lt;"note"&gt;`
- `function partySet(ids: string[]): EventPrototype&lt;"party_set"&gt;`
- `function runScribe(commands: string[], opts: RunScribeOptions): Promise&lt;RunScribeResult&gt;`
- `function runWeave(args: string[], opts: RunWeaveOptions): Promise&lt;RunWeaveResult&gt;`
- `function saveCharacter(key: CharacterKey, overrides?: Partial&lt;{ advancementPoints: { combat: number; exploration: number; social: number }; backstory?: string; backstoryTitle?: string; class: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; displayName: string; fullName: string; goals?: string; id: string; image?: string; level: number; lifecycle?: { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }; notes?: string; playerId: string; pronouns: string; species: string; subclass?: string }&gt;, __namedParameters: { validate?: boolean }): { data: { advancementPoints: { combat: number; exploration: number; social: number }; backstory?: string; backstoryTitle?: string; class: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; displayName: string; fullName: string; goals?: string; id: string; image?: string; level: number; lifecycle?: { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }; notes?: string; playerId: string; pronouns: string; species: string; subclass?: string }; filePath: string; id: string }`
- `function saveCharacters(specs: { key: CharacterKey; overrides?: Partial&lt;{ advancementPoints: { combat: number; exploration: number; social: number }; backstory?: string; backstoryTitle?: string; class: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; displayName: string; fullName: string; goals?: string; id: string; image?: string; level: number; lifecycle?: { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }; notes?: string; playerId: string; pronouns: string; species: string; subclass?: string }&gt; }[], opts?: { validate?: boolean }): { data: { advancementPoints: { combat: number; exploration: number; social: number }; backstory?: string; backstoryTitle?: string; class: "Barbarian" | "Bard" | "Cleric" | "Druid" | "Fighter" | "Monk" | "Paladin" | "Ranger" | "Rogue" | "Sorcerer" | "Warlock" | "Wizard"; culture: string; displayName: string; fullName: string; goals?: string; id: string; image?: string; level: number; lifecycle?: { retiredAt: string; retiredNote?: string; retiredReason: "archived" | "converted_to_npc" | "inactive_player" | "killed_in_action" | "retired_by_player" }; notes?: string; playerId: string; pronouns: string; species: string; subclass?: string }; filePath: string; id: string }[]`
- `function scout(from: string, target: string, revealLandmark: boolean): EventPrototype&lt;"scout"&gt;`
- `function seasonRollover(seasonId: string): EventPrototype&lt;"season_rollover"&gt;`
- `function sessionContinue(sessionId: string, currentHex: string, currentParty: string[], currentDate?: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }, sessionDate: string): EventPrototype&lt;"session_continue"&gt;`
- `function sessionEnd(sessionId: string): EventPrototype&lt;"session_end"&gt;`
- `function sessionPause(sessionId: string): EventPrototype&lt;"session_pause"&gt;`
- `function sessionStart(sessionId: string, startHex: string, sessionDate: string): EventPrototype&lt;"session_start"&gt;`
- `function timeLog(segments: number, daylightSegments: number, nightSegments: number, phase: "daylight" | "night", note?: string): EventPrototype&lt;"time_log"&gt;`
- `function trail(from: string, to: string): EventPrototype&lt;"trail"&gt;`
- `function weather(args: { category: "agreeable" | "catastrophic" | "extreme" | "ideal" | "inclement" | "nice" | "unpleasant"; date: { day: number; month: "Primaris" | "Gelidus" | "Hibernis" | "Vernalis" | "Pluvoris" | "Florara" | "Solinus" | "Aestara" | "Lucidus" | "Fructara" | "Umbraeus" | "Aridus"; year: number }; descriptors?: string[]; detail?: null | string; forecastAfter: number; forecastBefore: number; roll2d6: number; season: Season }): EventPrototype&lt;"weather_committed"&gt;`
- `function withTempRepo(title?: string, opts?: { initGit?: boolean; keepOnFailEnv?: string }, fn?: (repoPath: string) =&gt; Promise&lt;T&gt;): Promise&lt;string | T&gt;`
