---
import { getEntry } from 'astro:content';
import type { CharacterData, PlayerData } from '../types';

interface Props {
  character: CharacterData;
}

const { character } = Astro.props;

const playerData = await getEntry('players', character.playerId);
if (!playerData) {
  throw new Error(`Player not found: ${character.playerId}`);
}
const player: PlayerData = playerData.data;
---
<style>
    .data-container {
        display: flex;
    }

    .data-container > div {
        width: 50%;
    }
</style>
<div class="data-container">
  <div>
    <ul>
      <li>Name: {character.displayName}</li>
      <li>Pronouns: {character.pronouns}</li>
      <li>Species: {character.species}</li>
      <li>Culture: {character.culture}</li>
    </ul>
  </div>
  <div>
    <ul>
      <li>Player: {player.displayName} ({player.pronouns})</li>
      <li>Class: {character.class}</li>
      {character.subclass && <li>Subclass: {character.subclass}</li>}
      <li>Level: {character.level}</li>
    </ul>
  </div>
</div>
{character.backstory &&
  <div>
    <h2 class="title is-3">Backstory</h2>
    <p>{character.backstory}</p>
  </div>
}
{character.goals &&
  <div>
    <h2 class="title is-3">Goals</h2>
    <p>{character.goals}</p>
  </div>
}
{character.notes &&
  <div>
    <h2 class="title is-3">Notes</h2>
    <p>{character.notes}</p>
  </div>
}
