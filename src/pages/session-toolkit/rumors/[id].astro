---
import { getEntry } from 'astro:content';
import RumorDetail from '../../../components/RumorDetail.astro';
import SecretLayout from '../../../layouts/SecretLayout.astro';

// Get the ID from the incoming server request
const { id } = Astro.params;
if (!id) {
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  });
}

// Query for the entry directly using the request slug
const rumorData = await getEntry('rumors', id);

// Redirect if the entry does not exist
if (rumorData === undefined) {
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  });
}

const rumor = rumorData.data;
const title = `Rumor: ${rumor.title}`;
---
<style is:global>
    h3.title.is-4 {
        margin-bottom: 0.25rem;
    }
</style>
<SecretLayout title={title}>
  <RumorDetail rumor={rumor} />
</SecretLayout>
